(()=>{"use strict";var e={d:(t,s)=>{for(var r in s)e.o(s,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:s[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){const e=document.querySelector(".text-area");return{start:e.selectionStart,end:e.selectionEnd}}function s(e){const t=document.querySelector(".text-area");t.selectionStart=e.start,t.selectionEnd=e.start}e.d({},{T:()=>p});const r=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],n=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","[","]","\\","Caps Lock","A","S","D","F","G","H","J","K","L",";","'","Enter","Shift","Z","X","C","V","B","N","M",",",".","/","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],o=["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Caps Lock","A","S","D","F","G","H","J","K","L",":",'"',"Enter","Shift","Z","X","C","V","B","N","M","<",">","?","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],a=["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Caps Lock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],i=["Ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","\\","Caps Lock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter","Shift","Я","Ч","С","М","И","Т","Ь","Б","Ю",".","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],c=["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+","Backspace","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","/","Caps Lock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter","Shift","Я","Ч","С","М","И","Т","Ь","Б","Ю",",","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"];let d=!1,l=!0,u=!1,h=!1;"false"===localStorage.getItem("currentLanguageEn")&&(l=!1),window.addEventListener("beforeunload",(()=>{localStorage.setItem("currentLanguageEn",l)}));class f{constructor(e,t){this.keycode=e,this.button=document.createElement("button"),this.button.classList.add("key"),"ControlLeft"===e||"ControlRight"===e||"AltLeft"===e||"AltRight"===e||"MetaLeft"===e?this.button.classList.add("key-size-2"):"Tab"===e||"Backslash"===e?this.button.classList.add("key-size-3"):"Backspace"===e||"CapsLock"===e||"Enter"===e?this.button.classList.add("key-size-4"):"ShiftLeft"===e||"ShiftRight"===e?this.button.classList.add("key-size-5"):"Space"===e?this.button.classList.add("key-size-6"):this.button.classList.add("key-size-1"),this.renameKey(t),"ShiftLeft"!==e&&"ShiftRight"!==e?this.button.addEventListener("click",(()=>{this.pressKey()})):(this.button.addEventListener("mousedown",(()=>{this.pressKey()})),this.button.addEventListener("mouseup",(()=>{this.unpressKey()}))),document.querySelector(".keyboard-div").append(this.button)}pressKey(){"MetaLeft"!==this.keycode&&"AltLeft"!==this.keycode&&"AltRight"!==this.keycode&&"ControlLeft"!==this.keycode&&"ControlRight"!==this.keycode&&("Backspace"===this.keycode?function(){const e=document.querySelector(".text-area"),r=t();r.start===r.end?(e.value=e.value.substring(0,r.start-1)+e.value.substring(r.end),0!==r.start&&r.start--):e.value=e.value.substring(0,r.start)+e.value.substring(r.end),e.focus(),s(r)}():"Delete"===this.keycode?function(){const e=document.querySelector(".text-area"),r=t();r.start===r.end?e.value=e.value.substring(0,r.start)+e.value.substring(r.end+1):e.value=e.value.substring(0,r.start)+e.value.substring(r.end),e.focus(),s(r)}():"Enter"===this.keycode?function(){const e=document.querySelector(".text-area"),r=t();e.value=e.value.substring(0,r.start)+"\n"+e.value.substring(r.end),r.start++,e.focus(),s(r)}():"ArrowUp"===this.keycode||"ArrowDown"===this.keycode||"ArrowLeft"===this.keycode||"ArrowRight"===this.keycode?function(e){const r=document.querySelector(".text-area"),n=t();if("ArrowLeft"===e)0!==n.end&&n.end--,n.start=n.end;else if("ArrowRight"===e)n.end++,n.start=n.end;else if("ArrowUp"===e){const e=r.value;let t,s=0,o=0;for(let t=n.end-1;t>=0;t--)if("\n"===e[t]){s=t+1;break}t=n.end-s;for(let t=s-2;t>=0;t--)if("\n"===e[t]){o=t+1;break}n.end=o+t>=s?0===o&&0===s?0:s-1:o+t,n.start=n.end}else if("ArrowDown"===e){const e=r.value;let t,s=0,o=e.length,a=e.length;for(let t=n.end-1;t>=0;t--)if("\n"===e[t]){s=t+1;break}t=n.end-s;for(let t=n.end;t<e.length;t++)if("\n"===e[t]){o=t;break}for(let t=o+2;t<e.length;t++)if("\n"===e[t]){a=t;break}n.end=o+1+t>a?a:o+1+t,n.start=n.end}r.focus(),s(n)}(this.keycode):"Tab"===this.keycode?function(){const e=document.querySelector(".text-area"),r=t();e.value=e.value.substring(0,r.start)+"    "+e.value.substring(r.end),r.start+=4,e.focus(),s(r)}():"Space"===this.keycode?function(){const e=document.querySelector(".text-area"),r=t();e.value=e.value.substring(0,r.start)+" "+e.value.substring(r.end),r.start+=1,e.focus(),s(r)}():"ShiftLeft"===this.keycode||"ShiftRight"===this.keycode?y(p,l?o:c):"CapsLock"===this.keycode?(d=!d,l?d?(y(p,n),this.button.classList.add("caps_active")):(y(p,r),this.button.classList.remove("caps_active")):d?(y(p,i),this.button.classList.add("caps_active")):(y(p,a),this.button.classList.remove("caps_active"))):function(e){const r=document.querySelector(".text-area"),n=t();r.value=r.value.substring(0,n.start)+e.keyLetter+r.value.substring(n.end),n.start++,r.focus(),s(n)}(this))}unpressKey(){"ShiftLeft"!==this.keycode&&"ShiftRight"!==this.keycode||y(p,l?d?n:r:d?i:a)}renameKey(e){this.keyLetter=e,"ArrowUp"===this.keycode?this.button.innerHTML="&#129045;":"ArrowLeft"===this.keycode?this.button.innerHTML="&#129044;":"ArrowDown"===this.keycode?this.button.innerHTML="&#129047;":"ArrowRight"===this.keycode?this.button.innerHTML="&#129046;":"ShiftLeft"===this.keycode||"ShiftRight"===this.keycode?this.button.innerHTML=e+" &#8682;":"Enter"===this.keycode?this.button.innerHTML=this.keycode+" &#8626;":"Backspace"===this.keycode?this.button.innerHTML=this.keycode+" &#129044;":this.button.innerHTML=e}changeLanguage(){y(p,l?r:a)}}function y(e,t){e.forEach(((e,s)=>{e.renameKey(t[s])}))}(new class{constructor(){}create(){const e=document.createElement("header"),t=document.createElement("h1"),s=document.createElement("div"),r=document.createElement("p"),n=document.createElement("p"),o=document.createElement("div"),a=document.createElement("textarea"),i=document.createElement("div"),c=document.createElement("footer"),d=document.createElement("div"),l=document.createElement("p"),u=document.createElement("p"),h=document.createElement("a");e.classList.add("header-div"),r.classList.add("header__p"),n.classList.add("header__p"),o.classList.add("text-area-div"),a.classList.add("text-area"),i.classList.add("keyboard-div"),c.classList.add("footer-div"),h.setAttribute("href","https://rs.school/"),h.setAttribute("target","_blank"),t.innerText="Virtual Keyboard (VK)",r.innerText="This virtual keyboard is designed for windows",n.innerText="To switch language press Left Alt + Left Ctrl",l.innerHTML='<span>Developer: </span><a class="footer__a" href="https://github.com/Legat14" target="_blank">Ivan Zotov</a>',u.innerText="May of 2022",h.innerHTML='<img src="./assets/img/rs_school_js_w.svg" alt="RS School" width="180" height="67">',document.body.append(e),e.append(t),e.append(s),s.append(r),s.append(n),document.body.append(o),o.append(a),document.body.append(i),document.body.append(c),c.append(d),d.append(l),d.append(u),c.append(h)}}).create();const p=[];["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight","Delete"].forEach(((e,t)=>{p[t]=new f(e,l?r[t]:a[t])})),document.querySelector(".text-area").focus(),document.addEventListener("keydown",(()=>{if(event.isTrusted){let e="";p.forEach((t=>{t.keycode===event.code&&(event.preventDefault(),e=t)})),e&&("CapsLock"===e.keycode?d?e.button.classList.remove("caps_active"):e.button.classList.add("caps_active"):(e.button.classList.add("key_active"),"AltLeft"===e.keycode&&(u=!0),"ControlLeft"===e.keycode&&(h=!0),u&&h&&(l=!l,e.changeLanguage(),console.log(l))),e.pressKey())}})),document.addEventListener("keyup",(()=>{if(event.isTrusted&&"CapsLock"!==event.code){let e="";p.forEach((t=>{t.keycode===event.code&&(e=t)})),e&&e.button.classList.remove("key_active"),"ShiftLeft"!==e.keycode&&"ShiftRight"!==e.keycode||e.unpressKey(),"AltLeft"===e.keycode&&(u=!1),"ControlLeft"===e.keycode&&(h=!1)}})),document.addEventListener("click",(()=>{document.querySelector(".text-area").focus()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFBdkJvRCxFQUFXMUQsVUFDYlQsR0FBaUIsR0FFUSxnQkFBdkJtRSxFQUFXMUQsVUFDYlIsR0FBa0IsR0FFaEJELEdBQWtCQyxJQUVsQkYsR0FERUEsRUFLSm9FLEVBQVd0QixpQkFDWHlCLFFBQVFDLElBQUt4RSxLQUdqQm9FLEVBQVdsRCxnQkFLakJqQyxTQUFTcUIsaUJBQWlCLFNBQVMsS0FDakMsR0FBSTRELE1BQU1DLFdBQTRCLGFBQWZELE1BQU1HLEtBQXFCLENBQ2hELElBQUlELEVBQWEsR0FDakI1QixFQUFXUSxTQUFRTixJQUNiQSxFQUFVaEMsVUFBWXdELE1BQU1HLE9BQzlCRCxFQUFhMUIsTUFHYjBCLEdBQ0ZBLEVBQVd2RCxPQUFPRSxVQUFVMEIsT0FBTyxjQUVWLGNBQXZCMkIsRUFBVzFELFNBQWtELGVBQXZCMEQsRUFBVzFELFNBQ25EMEQsRUFBV2pELGFBRWMsWUFBdkJpRCxFQUFXMUQsVUFDYlQsR0FBaUIsR0FFUSxnQkFBdkJtRSxFQUFXMUQsVUFDYlIsR0FBa0IsT0FPeEJqQixTQUFTcUIsaUJBQWlCLFNBQVMsS0FDaEJyQixTQUFTQyxjQUFjLGNBQy9CcUMsWSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnB1Y2stZGVtby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYnB1Y2stZGVtby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYnB1Y2stZGVtby8uL3NyYy9mdW5jdGlvbnMvdGV4dEFyZWEuanMiLCJ3ZWJwYWNrOi8vd2VicHVjay1kZW1vLy4vc3JjL2NsYXNzZXMva2V5LmpzIiwid2VicGFjazovL3dlYnB1Y2stZGVtby8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vLi9zcmMvY2xhc3Nlcy9maWVsZC5qcyIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vLi9zcmMvZnVuY3Rpb25zL2dsb2JhbEV2ZW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCB7IGVudGVyTGV0dGVyLCBkZWxldGVQcmV2aW91c0xldHRlciwgZGVsZXRlTmV4dExldHRlciwgbmV4dFN0cmluZywgbW92ZUN1cnNvciwgaW5zZXJ0VGFiLCBpbnNlcnRTcGFjZSwgdG9nZ2xlQ2Fwc0xvY2sgfTtcclxuaW1wb3J0IHsgY2Fwc0xvY2tPbiB9IGZyb20gJy4uL2NsYXNzZXMva2V5J1xyXG5cclxuZnVuY3Rpb24gZ2V0Q3Vyc29yUG9zaXRpb25zKCkge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IHN0YXJ0ID0gdGV4dEFyZWEuc2VsZWN0aW9uU3RhcnQ7XHJcbiAgY29uc3QgZW5kID0gdGV4dEFyZWEuc2VsZWN0aW9uRW5kO1xyXG4gIHJldHVybiB7XHJcbiAgICBzdGFydDogc3RhcnQsXHJcbiAgICBlbmQ6IGVuZFxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcGxhY2VDdXJzb3IoY3Vyc29yUG9zaXRpb25zKSB7XHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgdGV4dEFyZWEuc2VsZWN0aW9uU3RhcnQgPSBjdXJzb3JQb3NpdGlvbnMuc3RhcnQ7XHJcbiAgdGV4dEFyZWEuc2VsZWN0aW9uRW5kID0gY3Vyc29yUG9zaXRpb25zLnN0YXJ0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbnRlckxldHRlcihidXR0b25PYmopIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBjdXJzb3JQb3NpdGlvbnMgPSBnZXRDdXJzb3JQb3NpdGlvbnMoKTtcclxuICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQpICsgYnV0dG9uT2JqLmtleUxldHRlciArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQrKztcclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVByZXZpb3VzTGV0dGVyKCkge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IGN1cnNvclBvc2l0aW9ucyA9IGdldEN1cnNvclBvc2l0aW9ucygpO1xyXG4gIGlmIChjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPT09IGN1cnNvclBvc2l0aW9ucy5lbmQpIHtcclxuICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvc2l0aW9ucy5zdGFydCAtIDEpICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQpO1xyXG4gICAgaWYgKGN1cnNvclBvc2l0aW9ucy5zdGFydCAhPT0gMCkge1xyXG4gICAgICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQtLTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zaXRpb25zLnN0YXJ0KSArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICB9XHJcbiAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICBwbGFjZUN1cnNvcihjdXJzb3JQb3NpdGlvbnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVOZXh0TGV0dGVyKCkge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IGN1cnNvclBvc2l0aW9ucyA9IGdldEN1cnNvclBvc2l0aW9ucygpO1xyXG4gIGlmIChjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPT09IGN1cnNvclBvc2l0aW9ucy5lbmQpIHtcclxuICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvc2l0aW9ucy5zdGFydCkgKyB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoY3Vyc29yUG9zaXRpb25zLmVuZCArIDEpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQpICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQpO1xyXG4gIH1cclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5leHRTdHJpbmcoKSB7XHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgY29uc3QgY3Vyc29yUG9zaXRpb25zID0gZ2V0Q3Vyc29yUG9zaXRpb25zKCk7XHJcbiAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zaXRpb25zLnN0YXJ0KSArICdcXG4nICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQpO1xyXG4gIGN1cnNvclBvc2l0aW9ucy5zdGFydCsrO1xyXG4gIHRleHRBcmVhLmZvY3VzKCk7XHJcbiAgcGxhY2VDdXJzb3IoY3Vyc29yUG9zaXRpb25zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbW92ZUN1cnNvcihhcnJvdykge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IGN1cnNvclBvc2l0aW9ucyA9IGdldEN1cnNvclBvc2l0aW9ucygpO1xyXG4gIGlmIChhcnJvdyA9PT0gJ0Fycm93TGVmdCcpIHtcclxuICAgIGlmIChjdXJzb3JQb3NpdGlvbnMuZW5kICE9PSAwKSB7XHJcbiAgICAgIGN1cnNvclBvc2l0aW9ucy5lbmQtLTtcclxuICAgIH1cclxuICAgIGN1cnNvclBvc2l0aW9ucy5zdGFydCA9IGN1cnNvclBvc2l0aW9ucy5lbmQ7XHJcbiAgfSBlbHNlIGlmIChhcnJvdyA9PT0gJ0Fycm93UmlnaHQnKSB7XHJcbiAgICBjdXJzb3JQb3NpdGlvbnMuZW5kKys7XHJcbiAgICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPSBjdXJzb3JQb3NpdGlvbnMuZW5kO1xyXG4gIH0gZWxzZSBpZiAoYXJyb3cgPT09ICdBcnJvd1VwJykge1xyXG4gICAgY29uc3QgdGV4dCA9IHRleHRBcmVhLnZhbHVlO1xyXG4gICAgbGV0IGN1cnJlbnRTdHJpbmdQb3NpdGlvbjtcclxuICAgIGxldCBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbiA9IDA7XHJcbiAgICBsZXQgcHJldmlvdXNTdHJpbmdTdGFydFBvc2l0aW9uID0gMDtcclxuICAgIGZvciAobGV0IGkgPSBjdXJzb3JQb3NpdGlvbnMuZW5kIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgaWYgKHRleHRbaV0gPT09ICdcXG4nKSB7XHJcbiAgICAgICAgY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24gPSBpICsgMTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3VycmVudFN0cmluZ1Bvc2l0aW9uID0gY3Vyc29yUG9zaXRpb25zLmVuZCAtIGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uO1xyXG4gICAgZm9yIChsZXQgaSA9IGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uIC0gMjsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgaWYgKHRleHRbaV0gPT09ICdcXG4nKSB7XHJcbiAgICAgICAgcHJldmlvdXNTdHJpbmdTdGFydFBvc2l0aW9uID0gaSArIDE7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChwcmV2aW91c1N0cmluZ1N0YXJ0UG9zaXRpb24gKyBjdXJyZW50U3RyaW5nUG9zaXRpb24gPj0gY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24pIHtcclxuICAgICAgaWYgKHByZXZpb3VzU3RyaW5nU3RhcnRQb3NpdGlvbiA9PT0gMCAmJiBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbiA9PT0gMCkge1xyXG4gICAgICAgIGN1cnNvclBvc2l0aW9ucy5lbmQgPSAwO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGN1cnNvclBvc2l0aW9ucy5lbmQgPSBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbiAtIDE7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN1cnNvclBvc2l0aW9ucy5lbmQgPSBwcmV2aW91c1N0cmluZ1N0YXJ0UG9zaXRpb24gKyBjdXJyZW50U3RyaW5nUG9zaXRpb247XHJcbiAgICB9XHJcbiAgICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPSBjdXJzb3JQb3NpdGlvbnMuZW5kO1xyXG4gIH0gZWxzZSBpZiAoYXJyb3cgPT09ICdBcnJvd0Rvd24nKSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gdGV4dEFyZWEudmFsdWU7XHJcbiAgICBsZXQgY3VycmVudFN0cmluZ1Bvc2l0aW9uO1xyXG4gICAgbGV0IGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uID0gMDtcclxuICAgIGxldCBjdXJyZW50U3RyaW5nRW5kUG9zaXRpb24gPSB0ZXh0Lmxlbmd0aDtcclxuICAgIGxldCBuZXh0U3RyaW5nRW5kUG9zaXRpb24gPSB0ZXh0Lmxlbmd0aDtcclxuICAgIGZvciAobGV0IGkgPSBjdXJzb3JQb3NpdGlvbnMuZW5kIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgaWYgKHRleHRbaV0gPT09ICdcXG4nKSB7XHJcbiAgICAgICAgY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24gPSBpICsgMTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3VycmVudFN0cmluZ1Bvc2l0aW9uID0gY3Vyc29yUG9zaXRpb25zLmVuZCAtIGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uO1xyXG4gICAgZm9yIChsZXQgaSA9IGN1cnNvclBvc2l0aW9ucy5lbmQ7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICh0ZXh0W2ldID09PSAnXFxuJykge1xyXG4gICAgICAgIGN1cnJlbnRTdHJpbmdFbmRQb3NpdGlvbiA9IGk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSBjdXJyZW50U3RyaW5nRW5kUG9zaXRpb24gKyAyOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodGV4dFtpXSA9PT0gJ1xcbicpIHtcclxuICAgICAgICBuZXh0U3RyaW5nRW5kUG9zaXRpb24gPSBpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY3VycmVudFN0cmluZ0VuZFBvc2l0aW9uICsgMSArIGN1cnJlbnRTdHJpbmdQb3NpdGlvbiA+IG5leHRTdHJpbmdFbmRQb3NpdGlvbikge1xyXG4gICAgICBjdXJzb3JQb3NpdGlvbnMuZW5kID0gbmV4dFN0cmluZ0VuZFBvc2l0aW9uO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3Vyc29yUG9zaXRpb25zLmVuZCA9IGN1cnJlbnRTdHJpbmdFbmRQb3NpdGlvbiArIDEgKyBjdXJyZW50U3RyaW5nUG9zaXRpb247XHJcbiAgICB9XHJcbiAgICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPSBjdXJzb3JQb3NpdGlvbnMuZW5kO1xyXG4gIH1cclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydFRhYigpIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBjdXJzb3JQb3NpdGlvbnMgPSBnZXRDdXJzb3JQb3NpdGlvbnMoKTtcclxuICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQpICsgJyAgICAnICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQpO1xyXG4gIGN1cnNvclBvc2l0aW9ucy5zdGFydCArPSA0O1xyXG4gIHRleHRBcmVhLmZvY3VzKCk7XHJcbiAgcGxhY2VDdXJzb3IoY3Vyc29yUG9zaXRpb25zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5zZXJ0U3BhY2UoKSB7XHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgY29uc3QgY3Vyc29yUG9zaXRpb25zID0gZ2V0Q3Vyc29yUG9zaXRpb25zKCk7XHJcbiAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zaXRpb25zLnN0YXJ0KSArICcgJyArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgKz0gMTtcclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUNhcHNMb2NrKCkge1xyXG4gIGlmIChjYXBzTG9ja09uKSB7XHJcbiAgICBjYXBzTG9ja09uID0gZmFsc2U7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNhcHNMb2NrT24gPSB0cnVlO1xyXG4gIH1cclxufSIsImltcG9ydCB7XHJcbiAgZW50ZXJMZXR0ZXIsXHJcbiAgZGVsZXRlUHJldmlvdXNMZXR0ZXIsXHJcbiAgZGVsZXRlTmV4dExldHRlcixcclxuICBuZXh0U3RyaW5nLFxyXG4gIG1vdmVDdXJzb3IsXHJcbiAgaW5zZXJ0VGFiLFxyXG4gIGluc2VydFNwYWNlLFxyXG4gIHRvZ2dsZUNhcHNMb2NrXHJcbn0gZnJvbSAnLi4vZnVuY3Rpb25zL3RleHRBcmVhJztcclxuaW1wb3J0IHtcclxuICBidXR0b25zQXJyXHJcbn0gZnJvbSAnLi4vaW5kZXgnO1xyXG5cclxuZXhwb3J0IHtcclxuICBrZXljb2RlcyxcclxuICBrZXlMZXR0ZXJzRW4sXHJcbiAga2V5TGV0dGVyc1J1LFxyXG4gIGNhcHNMb2NrT24sXHJcbiAgY3VycmVudExhbmd1YWdlRW4sXHJcbiAgYWx0TGVmdFByZXNzZWQsXHJcbiAgY3RybExlZnRQcmVzc2VkLFxyXG4gIEtleVxyXG59O1xyXG5cclxuY29uc3Qga2V5Y29kZXMgPSBbJ0JhY2txdW90ZScsICdEaWdpdDEnLCAnRGlnaXQyJywgJ0RpZ2l0MycsICdEaWdpdDQnLCAnRGlnaXQ1JywgJ0RpZ2l0NicsICdEaWdpdDcnLCAnRGlnaXQ4JywgJ0RpZ2l0OScsICdEaWdpdDAnLFxyXG4gICdNaW51cycsICdFcXVhbCcsICdCYWNrc3BhY2UnLCAnVGFiJywgJ0tleVEnLCAnS2V5VycsICdLZXlFJywgJ0tleVInLCAnS2V5VCcsICdLZXlZJywgJ0tleVUnLCAnS2V5SScsICdLZXlPJywgJ0tleVAnLFxyXG4gICdCcmFja2V0TGVmdCcsICdCcmFja2V0UmlnaHQnLCAnQmFja3NsYXNoJywgJ0NhcHNMb2NrJywgJ0tleUEnLCAnS2V5UycsICdLZXlEJywgJ0tleUYnLCAnS2V5RycsICdLZXlIJywgJ0tleUonLCAnS2V5SycsXHJcbiAgJ0tleUwnLCAnU2VtaWNvbG9uJywgJ1F1b3RlJywgJ0VudGVyJywgJ1NoaWZ0TGVmdCcsICdLZXlaJywgJ0tleVgnLCAnS2V5QycsICdLZXlWJywgJ0tleUInLCAnS2V5TicsICdLZXlNJywgJ0NvbW1hJywgJ1BlcmlvZCcsXHJcbiAgJ1NsYXNoJywgJ0Fycm93VXAnLCAnU2hpZnRSaWdodCcsICdDb250cm9sTGVmdCcsICdNZXRhTGVmdCcsICdBbHRMZWZ0JywgJ1NwYWNlJywgJ0FsdFJpZ2h0JywgJ0NvbnRyb2xSaWdodCcsICdBcnJvd0xlZnQnLFxyXG4gICdBcnJvd0Rvd24nLCAnQXJyb3dSaWdodCcsICdEZWxldGUnXHJcbl07XHJcbmNvbnN0IGtleUxldHRlcnNFbiA9IFsnYCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcwJywgJy0nLCAnPScsICdCYWNrc3BhY2UnLCAnVGFiJywgJ3EnLCAndycsICdlJywgJ3InLCAndCcsICd5JyxcclxuICAndScsICdpJywgJ28nLCAncCcsICdbJywgJ10nLCAnXFxcXCcsICdDYXBzIExvY2snLCAnYScsICdzJywgJ2QnLCAnZicsICdnJywgJ2gnLCAnaicsICdrJywgJ2wnLCAnOycsICdcXCcnLCAnRW50ZXInLCAnU2hpZnQnLFxyXG4gICd6JywgJ3gnLCAnYycsICd2JywgJ2InLCAnbicsICdtJywgJywnLCAnLicsICcvJywgJ0Fycm93VXAnLCAnU2hpZnQnLCAnQ3RybCcsICdXaW4nLCAnQWx0JywgJ1NwYWNlJywgJ0FsdCcsICdDdHJsJywgJ0Fycm93TGVmdCcsXHJcbiAgJ0Fycm93TGVmdERvd24nLCAnQXJyb3dSaWdodCcsICdEZWwnXHJcbl07XHJcbmNvbnN0IGtleUxldHRlcnNFbkNhcHNMb2NrID0gWydgJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzAnLCAnLScsICc9JywgJ0JhY2tzcGFjZScsICdUYWInLCAnUScsICdXJywgJ0UnLCAnUicsICdUJywgJ1knLFxyXG4gICdVJywgJ0knLCAnTycsICdQJywgJ1snLCAnXScsICdcXFxcJywgJ0NhcHMgTG9jaycsICdBJywgJ1MnLCAnRCcsICdGJywgJ0cnLCAnSCcsICdKJywgJ0snLCAnTCcsICc7JywgJ1xcJycsICdFbnRlcicsICdTaGlmdCcsXHJcbiAgJ1onLCAnWCcsICdDJywgJ1YnLCAnQicsICdOJywgJ00nLCAnLCcsICcuJywgJy8nLCAnQXJyb3dVcCcsICdTaGlmdCcsICdDdHJsJywgJ1dpbicsICdBbHQnLCAnU3BhY2UnLCAnQWx0JywgJ0N0cmwnLCAnQXJyb3dMZWZ0JyxcclxuICAnQXJyb3dMZWZ0RG93bicsICdBcnJvd1JpZ2h0JywgJ0RlbCdcclxuXTtcclxuY29uc3Qga2V5TGV0dGVyc0VuU2hpZnQgPSBbJ34nLCAnIScsICdAJywgJyMnLCAnJCcsICclJywgJ14nLCAnJicsICcqJywgJygnLCAnKScsICdfJywgJysnLCAnQmFja3NwYWNlJywgJ1RhYicsICdRJywgJ1cnLCAnRScsICdSJywgJ1QnLCAnWScsXHJcbiAgJ1UnLCAnSScsICdPJywgJ1AnLCAneycsICd9JywgJ3wnLCAnQ2FwcyBMb2NrJywgJ0EnLCAnUycsICdEJywgJ0YnLCAnRycsICdIJywgJ0onLCAnSycsICdMJywgJzonLCAnXCInLCAnRW50ZXInLCAnU2hpZnQnLFxyXG4gICdaJywgJ1gnLCAnQycsICdWJywgJ0InLCAnTicsICdNJywgJzwnLCAnPicsICc/JywgJ0Fycm93VXAnLCAnU2hpZnQnLCAnQ3RybCcsICdXaW4nLCAnQWx0JywgJ1NwYWNlJywgJ0FsdCcsICdDdHJsJywgJ0Fycm93TGVmdCcsXHJcbiAgJ0Fycm93TGVmdERvd24nLCAnQXJyb3dSaWdodCcsICdEZWwnXHJcbl07XHJcbmNvbnN0IGtleUxldHRlcnNSdSA9IFsn0ZEnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMCcsICctJywgJz0nLCAnQmFja3NwYWNlJywgJ1RhYicsICfQuScsICfRhicsICfRgycsICfQuicsICfQtScsICfQvScsXHJcbiAgJ9CzJywgJ9GIJywgJ9GJJywgJ9C3JywgJ9GFJywgJ9GKJywgJ1xcXFwnLCAnQ2FwcyBMb2NrJywgJ9GEJywgJ9GLJywgJ9CyJywgJ9CwJywgJ9C/JywgJ9GAJywgJ9C+JywgJ9C7JywgJ9C0JywgJ9C2JywgJ9GNJywgJ0VudGVyJywgJ1NoaWZ0JyxcclxuICAn0Y8nLCAn0YcnLCAn0YEnLCAn0LwnLCAn0LgnLCAn0YInLCAn0YwnLCAn0LEnLCAn0Y4nLCAnLicsICdBcnJvd1VwJywgJ1NoaWZ0JywgJ0N0cmwnLCAnV2luJywgJ0FsdCcsICdTcGFjZScsICdBbHQnLCAnQ3RybCcsICdBcnJvd0xlZnQnLFxyXG4gICdBcnJvd0xlZnREb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsJ1xyXG5dO1xyXG5jb25zdCBrZXlMZXR0ZXJzUnVDYXBzTG9jayA9IFsn0IEnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMCcsICctJywgJz0nLCAnQmFja3NwYWNlJywgJ1RhYicsICfQmScsICfQpicsICfQoycsICfQmicsICfQlScsICfQnScsXHJcbiAgJ9CTJywgJ9CoJywgJ9CpJywgJ9CXJywgJ9ClJywgJ9CqJywgJ1xcXFwnLCAnQ2FwcyBMb2NrJywgJ9CkJywgJ9CrJywgJ9CSJywgJ9CQJywgJ9CfJywgJ9CgJywgJ9CeJywgJ9CbJywgJ9CUJywgJ9CWJywgJ9CtJywgJ0VudGVyJywgJ1NoaWZ0JyxcclxuICAn0K8nLCAn0KcnLCAn0KEnLCAn0JwnLCAn0JgnLCAn0KInLCAn0KwnLCAn0JEnLCAn0K4nLCAnLicsICdBcnJvd1VwJywgJ1NoaWZ0JywgJ0N0cmwnLCAnV2luJywgJ0FsdCcsICdTcGFjZScsICdBbHQnLCAnQ3RybCcsICdBcnJvd0xlZnQnLFxyXG4gICdBcnJvd0xlZnREb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsJ1xyXG5dO1xyXG5jb25zdCBrZXlMZXR0ZXJzUnVTaGlmdCA9IFsn0IEnLCAnIScsICdcIicsICfihJYnLCAnOycsICclJywgJzonLCAnPycsICcqJywgJygnLCAnKScsICdfJywgJysnLCAnQmFja3NwYWNlJywgJ1RhYicsICfQmScsICfQpicsICfQoycsICfQmicsICfQlScsICfQnScsXHJcbiAgJ9CTJywgJ9CoJywgJ9CpJywgJ9CXJywgJ9ClJywgJ9CqJywgJy8nLCAnQ2FwcyBMb2NrJywgJ9CkJywgJ9CrJywgJ9CSJywgJ9CQJywgJ9CfJywgJ9CgJywgJ9CeJywgJ9CbJywgJ9CUJywgJ9CWJywgJ9CtJywgJ0VudGVyJywgJ1NoaWZ0JyxcclxuICAn0K8nLCAn0KcnLCAn0KEnLCAn0JwnLCAn0JgnLCAn0KInLCAn0KwnLCAn0JEnLCAn0K4nLCAnLCcsICdBcnJvd1VwJywgJ1NoaWZ0JywgJ0N0cmwnLCAnV2luJywgJ0FsdCcsICdTcGFjZScsICdBbHQnLCAnQ3RybCcsICdBcnJvd0xlZnQnLFxyXG4gICdBcnJvd0xlZnREb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsJ1xyXG5dO1xyXG5cclxubGV0IGNhcHNMb2NrT24gPSBmYWxzZTtcclxubGV0IGN1cnJlbnRMYW5ndWFnZUVuID0gdHJ1ZTtcclxubGV0IGFsdExlZnRQcmVzc2VkID0gZmFsc2U7XHJcbmxldCBjdHJsTGVmdFByZXNzZWQgPSBmYWxzZTtcclxuXHJcbmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudExhbmd1YWdlRW4nKSA9PT0gJ2ZhbHNlJykge1xyXG4gIGN1cnJlbnRMYW5ndWFnZUVuID0gZmFsc2U7XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCAoKSA9PiB7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRMYW5ndWFnZUVuJywgY3VycmVudExhbmd1YWdlRW4pO1xyXG59KTtcclxuXHJcbmNsYXNzIEtleSB7XHJcbiAgY29uc3RydWN0b3Ioa2V5Y29kZSwga2V5TGV0dGVyKSB7XHJcbiAgICB0aGlzLmtleWNvZGUgPSBrZXljb2RlO1xyXG4gICAgdGhpcy5idXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tleScpO1xyXG4gICAgaWYgKGtleWNvZGUgPT09ICdDb250cm9sTGVmdCcgfHwga2V5Y29kZSA9PT0gJ0NvbnRyb2xSaWdodCcgfHwga2V5Y29kZSA9PT0gJ0FsdExlZnQnIHx8IGtleWNvZGUgPT09ICdBbHRSaWdodCcgfHwga2V5Y29kZSA9PT0gJ01ldGFMZWZ0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS0yJyk7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdUYWInIHx8IGtleWNvZGUgPT09ICdCYWNrc2xhc2gnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tleS1zaXplLTMnKTtcclxuICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gJ0JhY2tzcGFjZScgfHwga2V5Y29kZSA9PT0gJ0NhcHNMb2NrJyB8fCBrZXljb2RlID09PSAnRW50ZXInKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tleS1zaXplLTQnKTtcclxuICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gJ1NoaWZ0TGVmdCcgfHwga2V5Y29kZSA9PT0gJ1NoaWZ0UmlnaHQnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tleS1zaXplLTUnKTtcclxuICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gJ1NwYWNlJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS02Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS0xJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZW5hbWVLZXkoa2V5TGV0dGVyKTtcclxuXHJcbiAgICBpZiAoa2V5Y29kZSAhPT0gJ1NoaWZ0TGVmdCcgJiYga2V5Y29kZSAhPT0gJ1NoaWZ0UmlnaHQnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucHJlc3NLZXkoKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wcmVzc0tleSgpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLnVucHJlc3NLZXkoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qga2V5Ym9hcmREaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcua2V5Ym9hcmQtZGl2Jyk7XHJcbiAgICBrZXlib2FyZERpdi5hcHBlbmQodGhpcy5idXR0b24pO1xyXG4gIH1cclxuICBwcmVzc0tleSgpIHtcclxuICAgIGlmICh0aGlzLmtleWNvZGUgIT09ICdNZXRhTGVmdCcgJiYgdGhpcy5rZXljb2RlICE9PSAnQWx0TGVmdCcgJiYgdGhpcy5rZXljb2RlICE9PSAnQWx0UmlnaHQnICYmIHRoaXMua2V5Y29kZSAhPT0gJ0NvbnRyb2xMZWZ0JyAmJiB0aGlzLmtleWNvZGUgIT09ICdDb250cm9sUmlnaHQnKSB7XHJcbiAgICAgIGlmICh0aGlzLmtleWNvZGUgPT09ICdCYWNrc3BhY2UnKSB7XHJcbiAgICAgICAgZGVsZXRlUHJldmlvdXNMZXR0ZXIoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdEZWxldGUnKSB7XHJcbiAgICAgICAgZGVsZXRlTmV4dExldHRlcigpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0VudGVyJykge1xyXG4gICAgICAgIG5leHRTdHJpbmcoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdBcnJvd1VwJyB8fCB0aGlzLmtleWNvZGUgPT09ICdBcnJvd0Rvd24nIHx8IHRoaXMua2V5Y29kZSA9PT0gJ0Fycm93TGVmdCcgfHwgdGhpcy5rZXljb2RlID09PSAnQXJyb3dSaWdodCcpIHtcclxuICAgICAgICBtb3ZlQ3Vyc29yKHRoaXMua2V5Y29kZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnVGFiJykge1xyXG4gICAgICAgIGluc2VydFRhYigpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ1NwYWNlJykge1xyXG4gICAgICAgIGluc2VydFNwYWNlKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnU2hpZnRMZWZ0JyB8fCB0aGlzLmtleWNvZGUgPT09ICdTaGlmdFJpZ2h0Jykge1xyXG4gICAgICAgIGlmIChjdXJyZW50TGFuZ3VhZ2VFbikge1xyXG4gICAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc0VuU2hpZnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzUnVTaGlmdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0NhcHNMb2NrJykge1xyXG4gICAgICAgIHRvZ2dsZUNhcHNMb2NrKCk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRMYW5ndWFnZUVuKSB7XHJcbiAgICAgICAgICBpZiAoY2Fwc0xvY2tPbikge1xyXG4gICAgICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzRW5DYXBzTG9jayk7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcHNfYWN0aXZlJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzRW4pO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXBzX2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoY2Fwc0xvY2tPbikge1xyXG4gICAgICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzUnVDYXBzTG9jayk7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcHNfYWN0aXZlJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzUnUpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXBzX2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlbnRlckxldHRlcih0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICB1bnByZXNzS2V5KCkge1xyXG4gICAgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ1NoaWZ0TGVmdCcgfHwgdGhpcy5rZXljb2RlID09PSAnU2hpZnRSaWdodCcpIHtcclxuICAgICAgaWYgKGN1cnJlbnRMYW5ndWFnZUVuKSB7XHJcbiAgICAgICAgaWYgKGNhcHNMb2NrT24pIHtcclxuICAgICAgICAgIG5hbWVBbGxLZXlzKGJ1dHRvbnNBcnIsIGtleUxldHRlcnNFbkNhcHNMb2NrKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc0VuKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGNhcHNMb2NrT24pIHtcclxuICAgICAgICAgIG5hbWVBbGxLZXlzKGJ1dHRvbnNBcnIsIGtleUxldHRlcnNSdUNhcHNMb2NrKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc1J1KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmVuYW1lS2V5KG5ld0tleSkge1xyXG4gICAgdGhpcy5rZXlMZXR0ZXIgPSBuZXdLZXk7XHJcbiAgICBpZiAodGhpcy5rZXljb2RlID09PSAnQXJyb3dVcCcpIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gJyYjMTI5MDQ1Oyc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0Fycm93TGVmdCcpIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gJyYjMTI5MDQ0Oyc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0Fycm93RG93bicpIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gJyYjMTI5MDQ3Oyc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0Fycm93UmlnaHQnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9ICcmIzEyOTA0NjsnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdTaGlmdExlZnQnIHx8IHRoaXMua2V5Y29kZSA9PT0gJ1NoaWZ0UmlnaHQnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9IG5ld0tleSArICcgJiM4NjgyOyc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0VudGVyJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSB0aGlzLmtleWNvZGUgKyAnICYjODYyNjsnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdCYWNrc3BhY2UnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9IHRoaXMua2V5Y29kZSArICcgJiMxMjkwNDQ7JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9IG5ld0tleTtcclxuICAgIH1cclxuICB9XHJcbiAgY2hhbmdlTGFuZ3VhZ2UoKSB7XHJcbiAgICBpZiAoY3VycmVudExhbmd1YWdlRW4pIHtcclxuICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc0VuKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5hbWVBbGxLZXlzKGJ1dHRvbnNBcnIsIGtleUxldHRlcnNSdSk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gbmFtZUFsbEtleXMoYnV0dG9uc0FyciwgbmV3S2V5c0Fycikge1xyXG4gIGJ1dHRvbnNBcnIuZm9yRWFjaCgoYnV0dG9uLCBudW1iZXIpID0+IHtcclxuICAgIGJ1dHRvbi5yZW5hbWVLZXkobmV3S2V5c0FycltudW1iZXJdKTtcclxuICB9KTtcclxufVxyXG5cclxuLy9UT0RPOiDQodC00LXQu9Cw0YLRjCDQv9C10YDQtdC60LvRjtGH0LDRgtC10LvRjCDRj9C30YvQutCwINC80YvRiNC60L7QuVxyXG4vLyDQn9GA0L7QstC10YDQuNGC0Ywg0YLRgNC10LHQvtCy0LDQvdC40Y8g0LXRidC1INGA0LDQt1xyXG4vLyDQntGE0L7RgNC80LjRgtGMINGI0LDQv9C60YMg0Lgg0YTRg9GC0LXRgFxyXG4vLyDQn9GA0L7QstC10YDQuNGC0Ywg0LvQuNC90YLQtdGA0L7QvCIsImltcG9ydCB7IEZpZWxkIH0gZnJvbSBcIi4vY2xhc3Nlcy9maWVsZFwiO1xyXG5pbXBvcnQgeyBrZXljb2Rlcywga2V5TGV0dGVyc0VuLCBrZXlMZXR0ZXJzUnUsIGN1cnJlbnRMYW5ndWFnZUVuLCBLZXkgfSBmcm9tIFwiLi9jbGFzc2VzL2tleVwiO1xyXG5pbXBvcnQgeyBhZGRLZXlib2FyZExpc3RlbmVyLCBmb2N1c1RleHRBcmVhIH0gZnJvbSBcIi4vZnVuY3Rpb25zL2dsb2JhbEV2ZW50c1wiO1xyXG5leHBvcnQgeyBidXR0b25zQXJyIH07XHJcblxyXG5jb25zdCBmaWVsZCA9IG5ldyBGaWVsZCgpO1xyXG5cclxuZmllbGQuY3JlYXRlKCk7XHJcblxyXG5jb25zdCBidXR0b25zQXJyID0gW107XHJcblxyXG5rZXljb2Rlcy5mb3JFYWNoKChrZXljb2RlLCBudW1iZXIpID0+IHtcclxuICBpZiAoY3VycmVudExhbmd1YWdlRW4pIHtcclxuICAgIGJ1dHRvbnNBcnJbbnVtYmVyXSA9IG5ldyBLZXkoa2V5Y29kZSwga2V5TGV0dGVyc0VuW251bWJlcl0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b25zQXJyW251bWJlcl0gPSBuZXcgS2V5KGtleWNvZGUsIGtleUxldHRlcnNSdVtudW1iZXJdKTtcclxuICB9XHJcbn0pO1xyXG5cclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIGFkZEtleWJvYXJkTGlzdGVuZXIoKTtcclxuICBmb2N1c1RleHRBcmVhKCk7IiwiZXhwb3J0IHsgRmllbGQgfTtcclxuXHJcbmNsYXNzIEZpZWxkIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICB9XHJcbiAgY3JlYXRlKCkge1xyXG4gICAgY29uc3QgaGVhZGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJyk7XHJcbiAgICBjb25zdCBoZWFkZXJUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XHJcbiAgICBjb25zdCBoZWFkZXJEaXZEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgaGVhZGVyRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBjb25zdCBoZWFkZXJMYW5nQ2FuZ2VJbnN0cnVjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIGNvbnN0IHRleHRBcmVhRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XHJcbiAgICBjb25zdCBrZXlib2FyZERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZm9vdGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9vdGVyJyk7XHJcbiAgICBjb25zdCBmb290ZXJEZXZlbG9wbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZm9vdGVyRGV2ZWxvcG1lbnRQRGV2ZWxvcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgY29uc3QgZm9vdGVyRGV2ZWxvcG1lbnRQWWVhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIGNvbnN0IGZvb3RlckNvdXJzZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcblxyXG4gICAgaGVhZGVyRGl2LmNsYXNzTGlzdC5hZGQoJ2hlYWRlci1kaXYnKTtcclxuICAgIGhlYWRlckRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcl9fcCcpO1xyXG4gICAgaGVhZGVyTGFuZ0NhbmdlSW5zdHJ1Y3Rpb24uY2xhc3NMaXN0LmFkZCgnaGVhZGVyX19wJyk7XHJcbiAgICB0ZXh0QXJlYURpdi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWFyZWEtZGl2Jyk7XHJcbiAgICB0ZXh0QXJlYS5jbGFzc0xpc3QuYWRkKCd0ZXh0LWFyZWEnKTtcclxuICAgIGtleWJvYXJkRGl2LmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkLWRpdicpO1xyXG4gICAgZm9vdGVyRGl2LmNsYXNzTGlzdC5hZGQoJ2Zvb3Rlci1kaXYnKTtcclxuXHJcbiAgICBmb290ZXJDb3Vyc2VMaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsICdodHRwczovL3JzLnNjaG9vbC8nKTtcclxuICAgIGZvb3RlckNvdXJzZUxpbmsuc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XHJcblxyXG4gICAgaGVhZGVyVGl0bGUuaW5uZXJUZXh0ID0gJ1ZpcnR1YWwgS2V5Ym9hcmQgKFZLKSdcclxuICAgIGhlYWRlckRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICdUaGlzIHZpcnR1YWwga2V5Ym9hcmQgaXMgZGVzaWduZWQgZm9yIHdpbmRvd3MnXHJcbiAgICBoZWFkZXJMYW5nQ2FuZ2VJbnN0cnVjdGlvbi5pbm5lclRleHQgPSAnVG8gc3dpdGNoIGxhbmd1YWdlIHByZXNzIExlZnQgQWx0ICsgTGVmdCBDdHJsJ1xyXG4gICAgZm9vdGVyRGV2ZWxvcG1lbnRQRGV2ZWxvcGVyLmlubmVySFRNTCA9ICc8c3Bhbj5EZXZlbG9wZXI6IDwvc3Bhbj48YSBjbGFzcz1cImZvb3Rlcl9fYVwiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vTGVnYXQxNFwiIHRhcmdldD1cIl9ibGFua1wiPkl2YW4gWm90b3Y8L2E+J1xyXG4gICAgZm9vdGVyRGV2ZWxvcG1lbnRQWWVhci5pbm5lclRleHQgPSAnTWF5IG9mIDIwMjInXHJcbiAgICBmb290ZXJDb3Vyc2VMaW5rLmlubmVySFRNTCA9ICc8aW1nIHNyYz1cIi4vYXNzZXRzL2ltZy9yc19zY2hvb2xfanNfdy5zdmdcIiBhbHQ9XCJSUyBTY2hvb2xcIiB3aWR0aD1cIjE4MFwiIGhlaWdodD1cIjY3XCI+J1xyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGhlYWRlckRpdik7XHJcbiAgICBoZWFkZXJEaXYuYXBwZW5kKGhlYWRlclRpdGxlKTtcclxuICAgIGhlYWRlckRpdi5hcHBlbmQoaGVhZGVyRGl2RGVzY3JpcHRpb24pO1xyXG4gICAgaGVhZGVyRGl2RGVzY3JpcHRpb24uYXBwZW5kKGhlYWRlckRlc2NyaXB0aW9uKTtcclxuICAgIGhlYWRlckRpdkRlc2NyaXB0aW9uLmFwcGVuZChoZWFkZXJMYW5nQ2FuZ2VJbnN0cnVjdGlvbik7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0ZXh0QXJlYURpdik7XHJcbiAgICB0ZXh0QXJlYURpdi5hcHBlbmQodGV4dEFyZWEpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoa2V5Ym9hcmREaXYpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoZm9vdGVyRGl2KTtcclxuICAgIGZvb3RlckRpdi5hcHBlbmQoZm9vdGVyRGV2ZWxvcG1lbnQpO1xyXG4gICAgZm9vdGVyRGV2ZWxvcG1lbnQuYXBwZW5kKGZvb3RlckRldmVsb3BtZW50UERldmVsb3Blcik7XHJcbiAgICBmb290ZXJEZXZlbG9wbWVudC5hcHBlbmQoZm9vdGVyRGV2ZWxvcG1lbnRQWWVhcik7XHJcbiAgICBmb290ZXJEaXYuYXBwZW5kKGZvb3RlckNvdXJzZUxpbmspO1xyXG4gIH07XHJcbn07IiwiZXhwb3J0IHsgYWRkS2V5Ym9hcmRMaXN0ZW5lciwgZm9jdXNUZXh0QXJlYSB9O1xyXG5pbXBvcnQgeyBidXR0b25zQXJyIH0gZnJvbSAnLi4vaW5kZXgnO1xyXG5pbXBvcnQgeyBjYXBzTG9ja09uLCBjdXJyZW50TGFuZ3VhZ2VFbiwgYWx0TGVmdFByZXNzZWQsIGN0cmxMZWZ0UHJlc3NlZCwgfSBmcm9tICcuLi9jbGFzc2VzL2tleSdcclxuXHJcbmZ1bmN0aW9uIGFkZEtleWJvYXJkTGlzdGVuZXIoKSB7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsICgpID0+IHtcclxuICAgIGlmIChldmVudC5pc1RydXN0ZWQpIHtcclxuICAgICAgbGV0IHRoaXNCdXR0b24gPSAnJztcclxuICAgICAgYnV0dG9uc0Fyci5mb3JFYWNoKGJ1dHRvbk9iaiA9PiB7XHJcbiAgICAgICAgaWYgKGJ1dHRvbk9iai5rZXljb2RlID09PSBldmVudC5jb2RlKSB7XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgdGhpc0J1dHRvbiA9IGJ1dHRvbk9iajtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHRoaXNCdXR0b24pIHtcclxuICAgICAgICBpZiAodGhpc0J1dHRvbi5rZXljb2RlID09PSAnQ2Fwc0xvY2snKSB7XHJcbiAgICAgICAgICBpZiAoY2Fwc0xvY2tPbikge1xyXG4gICAgICAgICAgICB0aGlzQnV0dG9uLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXBzX2FjdGl2ZScpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpc0J1dHRvbi5idXR0b24uY2xhc3NMaXN0LmFkZCgnY2Fwc19hY3RpdmUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpc0J1dHRvbi5idXR0b24uY2xhc3NMaXN0LmFkZCgna2V5X2FjdGl2ZScpO1xyXG4gICAgICAgICAgaWYgKHRoaXNCdXR0b24ua2V5Y29kZSA9PT0gJ0FsdExlZnQnKSB7XHJcbiAgICAgICAgICAgIGFsdExlZnRQcmVzc2VkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICh0aGlzQnV0dG9uLmtleWNvZGUgPT09ICdDb250cm9sTGVmdCcpIHtcclxuICAgICAgICAgICAgY3RybExlZnRQcmVzc2VkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChhbHRMZWZ0UHJlc3NlZCAmJiBjdHJsTGVmdFByZXNzZWQpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYW5ndWFnZUVuKSB7XHJcbiAgICAgICAgICAgICAgY3VycmVudExhbmd1YWdlRW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjdXJyZW50TGFuZ3VhZ2VFbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpc0J1dHRvbi5jaGFuZ2VMYW5ndWFnZSgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyAoY3VycmVudExhbmd1YWdlRW4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzQnV0dG9uLnByZXNzS2V5KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgpID0+IHtcclxuICAgIGlmIChldmVudC5pc1RydXN0ZWQgJiYgZXZlbnQuY29kZSAhPT0gJ0NhcHNMb2NrJykge1xyXG4gICAgICBsZXQgdGhpc0J1dHRvbiA9ICcnO1xyXG4gICAgICBidXR0b25zQXJyLmZvckVhY2goYnV0dG9uT2JqID0+IHtcclxuICAgICAgICBpZiAoYnV0dG9uT2JqLmtleWNvZGUgPT09IGV2ZW50LmNvZGUpIHtcclxuICAgICAgICAgIHRoaXNCdXR0b24gPSBidXR0b25PYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHRoaXNCdXR0b24pIHtcclxuICAgICAgICB0aGlzQnV0dG9uLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdrZXlfYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXNCdXR0b24ua2V5Y29kZSA9PT0gJ1NoaWZ0TGVmdCcgfHwgdGhpc0J1dHRvbi5rZXljb2RlID09PSAnU2hpZnRSaWdodCcpIHtcclxuICAgICAgICB0aGlzQnV0dG9uLnVucHJlc3NLZXkoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpc0J1dHRvbi5rZXljb2RlID09PSAnQWx0TGVmdCcpIHtcclxuICAgICAgICBhbHRMZWZ0UHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzQnV0dG9uLmtleWNvZGUgPT09ICdDb250cm9sTGVmdCcpIHtcclxuICAgICAgICBjdHJsTGVmdFByZXNzZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb2N1c1RleHRBcmVhKCkge1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIH0pO1xyXG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZ2V0Q3Vyc29yUG9zaXRpb25zIiwidGV4dEFyZWEiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdGFydCIsInNlbGVjdGlvblN0YXJ0IiwiZW5kIiwic2VsZWN0aW9uRW5kIiwicGxhY2VDdXJzb3IiLCJjdXJzb3JQb3NpdGlvbnMiLCJrZXlMZXR0ZXJzRW4iLCJrZXlMZXR0ZXJzRW5DYXBzTG9jayIsImtleUxldHRlcnNFblNoaWZ0Iiwia2V5TGV0dGVyc1J1Iiwia2V5TGV0dGVyc1J1Q2Fwc0xvY2siLCJrZXlMZXR0ZXJzUnVTaGlmdCIsImNhcHNMb2NrT24iLCJjdXJyZW50TGFuZ3VhZ2VFbiIsImFsdExlZnRQcmVzc2VkIiwiY3RybExlZnRQcmVzc2VkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRJdGVtIiwiS2V5IiwiY29uc3RydWN0b3IiLCJrZXljb2RlIiwia2V5TGV0dGVyIiwidGhpcyIsImJ1dHRvbiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW5hbWVLZXkiLCJwcmVzc0tleSIsInVucHJlc3NLZXkiLCJhcHBlbmQiLCJ2YWx1ZSIsInN1YnN0cmluZyIsImZvY3VzIiwiZGVsZXRlUHJldmlvdXNMZXR0ZXIiLCJkZWxldGVOZXh0TGV0dGVyIiwibmV4dFN0cmluZyIsImFycm93IiwidGV4dCIsImN1cnJlbnRTdHJpbmdQb3NpdGlvbiIsImN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uIiwicHJldmlvdXNTdHJpbmdTdGFydFBvc2l0aW9uIiwiaSIsImN1cnJlbnRTdHJpbmdFbmRQb3NpdGlvbiIsImxlbmd0aCIsIm5leHRTdHJpbmdFbmRQb3NpdGlvbiIsIm1vdmVDdXJzb3IiLCJpbnNlcnRUYWIiLCJpbnNlcnRTcGFjZSIsIm5hbWVBbGxLZXlzIiwiYnV0dG9uc0FyciIsInJlbW92ZSIsImJ1dHRvbk9iaiIsImVudGVyTGV0dGVyIiwibmV3S2V5IiwiaW5uZXJIVE1MIiwiY2hhbmdlTGFuZ3VhZ2UiLCJuZXdLZXlzQXJyIiwiZm9yRWFjaCIsIm51bWJlciIsImNyZWF0ZSIsImhlYWRlckRpdiIsImhlYWRlclRpdGxlIiwiaGVhZGVyRGl2RGVzY3JpcHRpb24iLCJoZWFkZXJEZXNjcmlwdGlvbiIsImhlYWRlckxhbmdDYW5nZUluc3RydWN0aW9uIiwidGV4dEFyZWFEaXYiLCJrZXlib2FyZERpdiIsImZvb3RlckRpdiIsImZvb3RlckRldmVsb3BtZW50IiwiZm9vdGVyRGV2ZWxvcG1lbnRQRGV2ZWxvcGVyIiwiZm9vdGVyRGV2ZWxvcG1lbnRQWWVhciIsImZvb3RlckNvdXJzZUxpbmsiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lclRleHQiLCJib2R5IiwiZXZlbnQiLCJpc1RydXN0ZWQiLCJ0aGlzQnV0dG9uIiwiY29kZSIsInByZXZlbnREZWZhdWx0IiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=