(()=>{"use strict";var e={d:(t,s)=>{for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){const e=document.querySelector(".text-area");return{start:e.selectionStart,end:e.selectionEnd}}function s(e){const t=document.querySelector(".text-area");t.selectionStart=e.start,t.selectionEnd=e.start}e.d({},{T:()=>d});const o=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],n=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","[","]","\\","Caps Lock","A","S","D","F","G","H","J","K","L",";","'","Enter","Shift","Z","X","C","V","B","N","M",",",".","/","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],r=["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Caps Lock","A","S","D","F","G","H","J","K","L",":",'"',"Enter","Shift","Z","X","C","V","B","N","M","<",">","?","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"];let i=!1;class a{constructor(e,t,s){this.keycode=e,this.number=s,this.button=document.createElement("button"),this.button.classList.add("key"),"ControlLeft"===e||"ControlRight"===e||"AltLeft"===e||"AltRight"===e||"MetaLeft"===e?this.button.classList.add("key-size-2"):"Tab"===e||"Backslash"===e?this.button.classList.add("key-size-3"):"Backspace"===e||"CapsLock"===e||"Enter"===e?this.button.classList.add("key-size-4"):"ShiftLeft"===e||"ShiftRight"===e?this.button.classList.add("key-size-5"):"Space"===e?this.button.classList.add("key-size-6"):this.button.classList.add("key-size-1"),this.renameKey(t),this.button.addEventListener("click",(()=>{this.pressKey()})),document.querySelector(".keyboard-div").append(this.button)}pressKey(){console.log(event),"MetaLeft"!==this.keycode&&"AltLeft"!==this.keycode&&"AltRight"!==this.keycode&&"ControlLeft"!==this.keycode&&"ControlRight"!==this.keycode&&("Backspace"===this.keycode?function(){const e=document.querySelector(".text-area"),o=t();o.start===o.end?(e.value=e.value.substring(0,o.start-1)+e.value.substring(o.end),0!==o.start&&o.start--):e.value=e.value.substring(0,o.start)+e.value.substring(o.end),e.focus(),s(o)}():"Delete"===this.keycode?function(){const e=document.querySelector(".text-area"),o=t();o.start===o.end?e.value=e.value.substring(0,o.start)+e.value.substring(o.end+1):e.value=e.value.substring(0,o.start)+e.value.substring(o.end),e.focus(),s(o)}():"Enter"===this.keycode?function(){const e=document.querySelector(".text-area"),o=t();e.value=e.value.substring(0,o.start)+"\n"+e.value.substring(o.end),o.start++,e.focus(),s(o)}():"ArrowUp"===this.keycode||"ArrowDown"===this.keycode||"ArrowLeft"===this.keycode||"ArrowRight"===this.keycode?function(e){const o=document.querySelector(".text-area"),n=t();if("ArrowLeft"===e)0!==n.end&&n.end--,n.start=n.end;else if("ArrowRight"===e)n.end++,n.start=n.end;else if("ArrowUp"===e){const e=o.value;let t,s=0,r=0;for(let t=n.end-1;t>=0;t--)if("\n"===e[t]){s=t+1;break}t=n.end-s;for(let t=s-2;t>=0;t--)if("\n"===e[t]){r=t+1;break}n.end=r+t>=s?0===r&&0===s?0:s-1:r+t,n.start=n.end}else if("ArrowDown"===e){const e=o.value;let t,s=0,r=e.length,i=e.length;for(let t=n.end-1;t>=0;t--)if("\n"===e[t]){s=t+1;break}t=n.end-s;for(let t=n.end;t<e.length;t++)if("\n"===e[t]){r=t;break}for(let t=r+2;t<e.length;t++)if("\n"===e[t]){i=t;break}n.end=r+1+t>i?i:r+1+t,n.start=n.end}o.focus(),s(n)}(this.keycode):"Tab"===this.keycode?function(){const e=document.querySelector(".text-area"),o=t();e.value=e.value.substring(0,o.start)+"    "+e.value.substring(o.end),o.start+=4,e.focus(),s(o)}():"Space"===this.keycode?function(){const e=document.querySelector(".text-area"),o=t();e.value=e.value.substring(0,o.start)+" "+e.value.substring(o.end),o.start+=1,e.focus(),s(o)}():"ShiftLeft"===this.keycode||"ShiftRight"===this.keycode?c(d,r):"CapsLock"===this.keycode?(i=!i,i?(c(d,n),this.button.classList.add("caps_active")):(c(d,o),this.button.classList.remove("caps_active"))):function(e){const o=document.querySelector(".text-area"),n=t();o.value=o.value.substring(0,n.start)+e.keyLetter+o.value.substring(n.end),n.start++,o.focus(),s(n)}(this))}unpressKey(){console.log(event),"ShiftLeft"!==this.keycode&&"ShiftRight"!==this.keycode||c(d,i?n:o)}renameKey(e){this.keyLetter=e,"ArrowUp"===this.keycode?this.button.innerHTML="&#129045;":"ArrowLeft"===this.keycode?this.button.innerHTML="&#129044;":"ArrowDown"===this.keycode?this.button.innerHTML="&#129047;":"ArrowRight"===this.keycode?this.button.innerHTML="&#129046;":"ShiftLeft"===this.keycode||"ShiftRight"===this.keycode?this.button.innerHTML=e+" &#8682;":"Enter"===this.keycode?this.button.innerHTML=this.keycode+" &#8626;":"Backspace"===this.keycode?this.button.innerHTML=this.keycode+" &#129044;":this.button.innerHTML=e}}function c(e,t){e.forEach(((e,s)=>{e.renameKey(t[s])}))}(new class{constructor(){}create(){const e=document.createElement("div"),t=document.createElement("p"),s=document.createElement("div"),o=document.createElement("textarea"),n=document.createElement("div"),r=document.createElement("div");e.classList.add("header-div"),t.classList.add("header__description"),s.classList.add("text-area-div"),o.classList.add("text-area"),n.classList.add("keyboard-div"),r.classList.add("footer-div"),t.innerText="This virtual keyboard is designed for windows",document.body.append(e),e.append(t),document.body.append(s),s.append(o),document.body.append(n),document.body.append(r)}}).create();const d=[];["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight","Delete"].forEach(((e,t)=>{d[t]=new a(e,o[t],t)})),document.querySelector(".text-area").focus(),document.addEventListener("keydown",(()=>{if(console.log(event),event.isTrusted){let e="";d.forEach((t=>{t.keycode===event.code&&(event.preventDefault(),e=t)})),e&&("CapsLock"===e.keycode?i?e.button.classList.remove("caps_active"):e.button.classList.add("caps_active"):e.button.classList.add("key_active"),e.pressKey())}})),document.addEventListener("keyup",(()=>{if(console.log(event),event.isTrusted&&"CapsLock"!==event.code){let e="";d.forEach((t=>{t.keycode===event.code&&(e=t)})),e&&e.button.classList.remove("key_active"),"ShiftLeft"!==e.keycode&&"ShiftRight"!==e.keycode||e.unpressKey()}})),document.addEventListener("click",(()=>{document.querySelector(".text-area").focus()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNqQmxCLEVBQVdRLFNBQVFOLElBQ2JBLEVBQVVwQyxVQUFZYyxNQUFNdUMsT0FDOUJELEVBQWFoQixNQUdiZ0IsR0FDRkEsRUFBV2hELE9BQU9FLFVBQVU2QixPQUFPLGNBRVYsY0FBdkJpQixFQUFXcEQsU0FBa0QsZUFBdkJvRCxFQUFXcEQsU0FDbkRvRCxFQUFXZCxpQkFPakJwRCxTQUFTdUIsaUJBQWlCLFNBQVMsS0FDaEJ2QixTQUFTQyxjQUFjLGNBQy9COEIsWSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnB1Y2stZGVtby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYnB1Y2stZGVtby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYnB1Y2stZGVtby8uL3NyYy9mdW5jdGlvbnMvdGV4dEFyZWEuanMiLCJ3ZWJwYWNrOi8vd2VicHVjay1kZW1vLy4vc3JjL2NsYXNzZXMva2V5LmpzIiwid2VicGFjazovL3dlYnB1Y2stZGVtby8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vLi9zcmMvY2xhc3Nlcy9maWVsZC5qcyIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vLi9zcmMvZnVuY3Rpb25zL2dsb2JhbEV2ZW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCB7IGVudGVyTGV0dGVyLCBkZWxldGVQcmV2aW91c0xldHRlciwgZGVsZXRlTmV4dExldHRlciwgbmV4dFN0cmluZywgbW92ZUN1cnNvciwgaW5zZXJ0VGFiLCBpbnNlcnRTcGFjZSwgdG9nZ2xlQ2Fwc0xvY2sgfTtcclxuaW1wb3J0IHsgY2Fwc0xvY2tPbiB9IGZyb20gJy4uL2NsYXNzZXMva2V5J1xyXG5cclxuZnVuY3Rpb24gZ2V0Q3Vyc29yUG9zaXRpb25zKCkge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IHN0YXJ0ID0gdGV4dEFyZWEuc2VsZWN0aW9uU3RhcnQ7XHJcbiAgY29uc3QgZW5kID0gdGV4dEFyZWEuc2VsZWN0aW9uRW5kO1xyXG4gIHJldHVybiB7XHJcbiAgICBzdGFydDogc3RhcnQsXHJcbiAgICBlbmQ6IGVuZFxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcGxhY2VDdXJzb3IoY3Vyc29yUG9zaXRpb25zKSB7XHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgdGV4dEFyZWEuc2VsZWN0aW9uU3RhcnQgPSBjdXJzb3JQb3NpdGlvbnMuc3RhcnQ7XHJcbiAgdGV4dEFyZWEuc2VsZWN0aW9uRW5kID0gY3Vyc29yUG9zaXRpb25zLnN0YXJ0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbnRlckxldHRlcihidXR0b25PYmopIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBjdXJzb3JQb3NpdGlvbnMgPSBnZXRDdXJzb3JQb3NpdGlvbnMoKTtcclxuICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQpICsgYnV0dG9uT2JqLmtleUxldHRlciArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQrKztcclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVByZXZpb3VzTGV0dGVyKCkge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IGN1cnNvclBvc2l0aW9ucyA9IGdldEN1cnNvclBvc2l0aW9ucygpO1xyXG4gIGlmIChjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPT09IGN1cnNvclBvc2l0aW9ucy5lbmQpIHtcclxuICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvc2l0aW9ucy5zdGFydCAtIDEpICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQpO1xyXG4gICAgaWYgKGN1cnNvclBvc2l0aW9ucy5zdGFydCAhPT0gMCkge1xyXG4gICAgICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQtLTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zaXRpb25zLnN0YXJ0KSArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICB9XHJcbiAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICBwbGFjZUN1cnNvcihjdXJzb3JQb3NpdGlvbnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVOZXh0TGV0dGVyKCkge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IGN1cnNvclBvc2l0aW9ucyA9IGdldEN1cnNvclBvc2l0aW9ucygpO1xyXG4gIGlmIChjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPT09IGN1cnNvclBvc2l0aW9ucy5lbmQpIHtcclxuICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvc2l0aW9ucy5zdGFydCkgKyB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoY3Vyc29yUG9zaXRpb25zLmVuZCArIDEpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQpICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQpO1xyXG4gIH1cclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5leHRTdHJpbmcoKSB7XHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgY29uc3QgY3Vyc29yUG9zaXRpb25zID0gZ2V0Q3Vyc29yUG9zaXRpb25zKCk7XHJcbiAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zaXRpb25zLnN0YXJ0KSArICdcXG4nICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQpO1xyXG4gIGN1cnNvclBvc2l0aW9ucy5zdGFydCsrO1xyXG4gIHRleHRBcmVhLmZvY3VzKCk7XHJcbiAgcGxhY2VDdXJzb3IoY3Vyc29yUG9zaXRpb25zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbW92ZUN1cnNvcihhcnJvdykge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IGN1cnNvclBvc2l0aW9ucyA9IGdldEN1cnNvclBvc2l0aW9ucygpO1xyXG4gIGlmIChhcnJvdyA9PT0gJ0Fycm93TGVmdCcpIHtcclxuICAgIGlmIChjdXJzb3JQb3NpdGlvbnMuZW5kICE9PSAwKSB7XHJcbiAgICAgIGN1cnNvclBvc2l0aW9ucy5lbmQtLTtcclxuICAgIH1cclxuICAgIGN1cnNvclBvc2l0aW9ucy5zdGFydCA9IGN1cnNvclBvc2l0aW9ucy5lbmQ7XHJcbiAgfSBlbHNlIGlmIChhcnJvdyA9PT0gJ0Fycm93UmlnaHQnKSB7XHJcbiAgICBjdXJzb3JQb3NpdGlvbnMuZW5kKys7XHJcbiAgICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPSBjdXJzb3JQb3NpdGlvbnMuZW5kO1xyXG4gIH0gZWxzZSBpZiAoYXJyb3cgPT09ICdBcnJvd1VwJykge1xyXG4gICAgY29uc3QgdGV4dCA9IHRleHRBcmVhLnZhbHVlO1xyXG4gICAgbGV0IGN1cnJlbnRTdHJpbmdQb3NpdGlvbjtcclxuICAgIGxldCBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbiA9IDA7XHJcbiAgICBsZXQgcHJldmlvdXNTdHJpbmdTdGFydFBvc2l0aW9uID0gMDtcclxuICAgIGZvciAobGV0IGkgPSBjdXJzb3JQb3NpdGlvbnMuZW5kIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgaWYgKHRleHRbaV0gPT09ICdcXG4nKSB7XHJcbiAgICAgICAgY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24gPSBpICsgMTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3VycmVudFN0cmluZ1Bvc2l0aW9uID0gY3Vyc29yUG9zaXRpb25zLmVuZCAtIGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uO1xyXG4gICAgZm9yIChsZXQgaSA9IGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uIC0gMjsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgaWYgKHRleHRbaV0gPT09ICdcXG4nKSB7XHJcbiAgICAgICAgcHJldmlvdXNTdHJpbmdTdGFydFBvc2l0aW9uID0gaSArIDE7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChwcmV2aW91c1N0cmluZ1N0YXJ0UG9zaXRpb24gKyBjdXJyZW50U3RyaW5nUG9zaXRpb24gPj0gY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24pIHtcclxuICAgICAgaWYgKHByZXZpb3VzU3RyaW5nU3RhcnRQb3NpdGlvbiA9PT0gMCAmJiBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbiA9PT0gMCkge1xyXG4gICAgICAgIGN1cnNvclBvc2l0aW9ucy5lbmQgPSAwO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGN1cnNvclBvc2l0aW9ucy5lbmQgPSBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbiAtIDE7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN1cnNvclBvc2l0aW9ucy5lbmQgPSBwcmV2aW91c1N0cmluZ1N0YXJ0UG9zaXRpb24gKyBjdXJyZW50U3RyaW5nUG9zaXRpb247XHJcbiAgICB9XHJcbiAgICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPSBjdXJzb3JQb3NpdGlvbnMuZW5kO1xyXG4gIH0gZWxzZSBpZiAoYXJyb3cgPT09ICdBcnJvd0Rvd24nKSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gdGV4dEFyZWEudmFsdWU7XHJcbiAgICBsZXQgY3VycmVudFN0cmluZ1Bvc2l0aW9uO1xyXG4gICAgbGV0IGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uID0gMDtcclxuICAgIGxldCBjdXJyZW50U3RyaW5nRW5kUG9zaXRpb24gPSB0ZXh0Lmxlbmd0aDtcclxuICAgIGxldCBuZXh0U3RyaW5nRW5kUG9zaXRpb24gPSB0ZXh0Lmxlbmd0aDtcclxuICAgIGZvciAobGV0IGkgPSBjdXJzb3JQb3NpdGlvbnMuZW5kIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgaWYgKHRleHRbaV0gPT09ICdcXG4nKSB7XHJcbiAgICAgICAgY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24gPSBpICsgMTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3VycmVudFN0cmluZ1Bvc2l0aW9uID0gY3Vyc29yUG9zaXRpb25zLmVuZCAtIGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uO1xyXG4gICAgZm9yIChsZXQgaSA9IGN1cnNvclBvc2l0aW9ucy5lbmQ7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICh0ZXh0W2ldID09PSAnXFxuJykge1xyXG4gICAgICAgIGN1cnJlbnRTdHJpbmdFbmRQb3NpdGlvbiA9IGk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSBjdXJyZW50U3RyaW5nRW5kUG9zaXRpb24gKyAyOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodGV4dFtpXSA9PT0gJ1xcbicpIHtcclxuICAgICAgICBuZXh0U3RyaW5nRW5kUG9zaXRpb24gPSBpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY3VycmVudFN0cmluZ0VuZFBvc2l0aW9uICsgMSArIGN1cnJlbnRTdHJpbmdQb3NpdGlvbiA+IG5leHRTdHJpbmdFbmRQb3NpdGlvbikge1xyXG4gICAgICBjdXJzb3JQb3NpdGlvbnMuZW5kID0gbmV4dFN0cmluZ0VuZFBvc2l0aW9uO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3Vyc29yUG9zaXRpb25zLmVuZCA9IGN1cnJlbnRTdHJpbmdFbmRQb3NpdGlvbiArIDEgKyBjdXJyZW50U3RyaW5nUG9zaXRpb247XHJcbiAgICB9XHJcbiAgICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPSBjdXJzb3JQb3NpdGlvbnMuZW5kO1xyXG4gIH1cclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydFRhYigpIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBjdXJzb3JQb3NpdGlvbnMgPSBnZXRDdXJzb3JQb3NpdGlvbnMoKTtcclxuICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQpICsgJyAgICAnICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQpO1xyXG4gIGN1cnNvclBvc2l0aW9ucy5zdGFydCArPSA0O1xyXG4gIHRleHRBcmVhLmZvY3VzKCk7XHJcbiAgcGxhY2VDdXJzb3IoY3Vyc29yUG9zaXRpb25zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5zZXJ0U3BhY2UoKSB7XHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgY29uc3QgY3Vyc29yUG9zaXRpb25zID0gZ2V0Q3Vyc29yUG9zaXRpb25zKCk7XHJcbiAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zaXRpb25zLnN0YXJ0KSArICcgJyArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgKz0gMTtcclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUNhcHNMb2NrKCkge1xyXG4gIGlmIChjYXBzTG9ja09uKSB7XHJcbiAgICBjYXBzTG9ja09uID0gZmFsc2U7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNhcHNMb2NrT24gPSB0cnVlO1xyXG4gIH1cclxufSIsImltcG9ydCB7XHJcbiAgZW50ZXJMZXR0ZXIsXHJcbiAgZGVsZXRlUHJldmlvdXNMZXR0ZXIsXHJcbiAgZGVsZXRlTmV4dExldHRlcixcclxuICBuZXh0U3RyaW5nLFxyXG4gIG1vdmVDdXJzb3IsXHJcbiAgaW5zZXJ0VGFiLFxyXG4gIGluc2VydFNwYWNlLFxyXG4gIHRvZ2dsZUNhcHNMb2NrXHJcbn0gZnJvbSAnLi4vZnVuY3Rpb25zL3RleHRBcmVhJztcclxuaW1wb3J0IHtcclxuICBidXR0b25zQXJyXHJcbn0gZnJvbSAnLi4vaW5kZXgnO1xyXG5cclxuZXhwb3J0IHtcclxuICBrZXljb2RlcyxcclxuICBrZXlMZXR0ZXJzRW4sXHJcbiAgY2Fwc0xvY2tPbixcclxuICBLZXlcclxufTtcclxuXHJcbmNvbnN0IGtleWNvZGVzID0gWydCYWNrcXVvdGUnLCAnRGlnaXQxJywgJ0RpZ2l0MicsICdEaWdpdDMnLCAnRGlnaXQ0JywgJ0RpZ2l0NScsICdEaWdpdDYnLCAnRGlnaXQ3JywgJ0RpZ2l0OCcsICdEaWdpdDknLCAnRGlnaXQwJyxcclxuICAnTWludXMnLCAnRXF1YWwnLCAnQmFja3NwYWNlJywgJ1RhYicsICdLZXlRJywgJ0tleVcnLCAnS2V5RScsICdLZXlSJywgJ0tleVQnLCAnS2V5WScsICdLZXlVJywgJ0tleUknLCAnS2V5TycsICdLZXlQJyxcclxuICAnQnJhY2tldExlZnQnLCAnQnJhY2tldFJpZ2h0JywgJ0JhY2tzbGFzaCcsICdDYXBzTG9jaycsICdLZXlBJywgJ0tleVMnLCAnS2V5RCcsICdLZXlGJywgJ0tleUcnLCAnS2V5SCcsICdLZXlKJywgJ0tleUsnLFxyXG4gICdLZXlMJywgJ1NlbWljb2xvbicsICdRdW90ZScsICdFbnRlcicsICdTaGlmdExlZnQnLCAnS2V5WicsICdLZXlYJywgJ0tleUMnLCAnS2V5VicsICdLZXlCJywgJ0tleU4nLCAnS2V5TScsICdDb21tYScsICdQZXJpb2QnLFxyXG4gICdTbGFzaCcsICdBcnJvd1VwJywgJ1NoaWZ0UmlnaHQnLCAnQ29udHJvbExlZnQnLCAnTWV0YUxlZnQnLCAnQWx0TGVmdCcsICdTcGFjZScsICdBbHRSaWdodCcsICdDb250cm9sUmlnaHQnLCAnQXJyb3dMZWZ0JyxcclxuICAnQXJyb3dEb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsZXRlJ1xyXG5dO1xyXG5jb25zdCBrZXlMZXR0ZXJzRW4gPSBbJ2AnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMCcsICctJywgJz0nLCAnQmFja3NwYWNlJywgJ1RhYicsICdxJywgJ3cnLCAnZScsICdyJywgJ3QnLCAneScsXHJcbiAgJ3UnLCAnaScsICdvJywgJ3AnLCAnWycsICddJywgJ1xcXFwnLCAnQ2FwcyBMb2NrJywgJ2EnLCAncycsICdkJywgJ2YnLCAnZycsICdoJywgJ2onLCAnaycsICdsJywgJzsnLCAnXFwnJywgJ0VudGVyJywgJ1NoaWZ0JyxcclxuICAneicsICd4JywgJ2MnLCAndicsICdiJywgJ24nLCAnbScsICcsJywgJy4nLCAnLycsICdBcnJvd1VwJywgJ1NoaWZ0JywgJ0N0cmwnLCAnV2luJywgJ0FsdCcsICdTcGFjZScsICdBbHQnLCAnQ3RybCcsICdBcnJvd0xlZnQnLFxyXG4gICdBcnJvd0xlZnREb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsJ1xyXG5dO1xyXG5jb25zdCBrZXlMZXR0ZXJzRW5DYXBzTG9jayA9IFsnYCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcwJywgJy0nLCAnPScsICdCYWNrc3BhY2UnLCAnVGFiJywgJ1EnLCAnVycsICdFJywgJ1InLCAnVCcsICdZJyxcclxuICAnVScsICdJJywgJ08nLCAnUCcsICdbJywgJ10nLCAnXFxcXCcsICdDYXBzIExvY2snLCAnQScsICdTJywgJ0QnLCAnRicsICdHJywgJ0gnLCAnSicsICdLJywgJ0wnLCAnOycsICdcXCcnLCAnRW50ZXInLCAnU2hpZnQnLFxyXG4gICdaJywgJ1gnLCAnQycsICdWJywgJ0InLCAnTicsICdNJywgJywnLCAnLicsICcvJywgJ0Fycm93VXAnLCAnU2hpZnQnLCAnQ3RybCcsICdXaW4nLCAnQWx0JywgJ1NwYWNlJywgJ0FsdCcsICdDdHJsJywgJ0Fycm93TGVmdCcsXHJcbiAgJ0Fycm93TGVmdERvd24nLCAnQXJyb3dSaWdodCcsICdEZWwnXHJcbl07XHJcbmNvbnN0IGtleUxldHRlcnNFblNoaWZ0ID0gWyd+JywgJyEnLCAnQCcsICcjJywgJyQnLCAnJScsICdeJywgJyYnLCAnKicsICcoJywgJyknLCAnXycsICcrJywgJ0JhY2tzcGFjZScsICdUYWInLCAnUScsICdXJywgJ0UnLCAnUicsICdUJywgJ1knLFxyXG4gICdVJywgJ0knLCAnTycsICdQJywgJ3snLCAnfScsICd8JywgJ0NhcHMgTG9jaycsICdBJywgJ1MnLCAnRCcsICdGJywgJ0cnLCAnSCcsICdKJywgJ0snLCAnTCcsICc6JywgJ1wiJywgJ0VudGVyJywgJ1NoaWZ0JyxcclxuICAnWicsICdYJywgJ0MnLCAnVicsICdCJywgJ04nLCAnTScsICc8JywgJz4nLCAnPycsICdBcnJvd1VwJywgJ1NoaWZ0JywgJ0N0cmwnLCAnV2luJywgJ0FsdCcsICdTcGFjZScsICdBbHQnLCAnQ3RybCcsICdBcnJvd0xlZnQnLFxyXG4gICdBcnJvd0xlZnREb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsJ1xyXG5dO1xyXG5cclxubGV0IGNhcHNMb2NrT24gPSBmYWxzZTtcclxubGV0IGN1cnJlbnRMYW5ndWFnZUVuID0gdHJ1ZTtcclxuXHJcbmNsYXNzIEtleSB7XHJcbiAgY29uc3RydWN0b3Ioa2V5Y29kZSwga2V5TGV0dGVyLCBudW1iZXIpIHtcclxuICAgIHRoaXMua2V5Y29kZSA9IGtleWNvZGU7XHJcbiAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcclxuICAgIHRoaXMuYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXknKTtcclxuICAgIGlmIChrZXljb2RlID09PSAnQ29udHJvbExlZnQnIHx8IGtleWNvZGUgPT09ICdDb250cm9sUmlnaHQnIHx8IGtleWNvZGUgPT09ICdBbHRMZWZ0JyB8fCBrZXljb2RlID09PSAnQWx0UmlnaHQnIHx8IGtleWNvZGUgPT09ICdNZXRhTGVmdCcpIHtcclxuICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LmFkZCgna2V5LXNpemUtMicpO1xyXG4gICAgfSBlbHNlIGlmIChrZXljb2RlID09PSAnVGFiJyB8fCBrZXljb2RlID09PSAnQmFja3NsYXNoJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS0zJyk7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdCYWNrc3BhY2UnIHx8IGtleWNvZGUgPT09ICdDYXBzTG9jaycgfHwga2V5Y29kZSA9PT0gJ0VudGVyJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS00Jyk7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdTaGlmdExlZnQnIHx8IGtleWNvZGUgPT09ICdTaGlmdFJpZ2h0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS01Jyk7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdTcGFjZScpIHtcclxuICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LmFkZCgna2V5LXNpemUtNicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LmFkZCgna2V5LXNpemUtMScpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVuYW1lS2V5KGtleUxldHRlcik7XHJcblxyXG4gICAgdGhpcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMucHJlc3NLZXkoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGtleWJvYXJkRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmtleWJvYXJkLWRpdicpO1xyXG4gICAga2V5Ym9hcmREaXYuYXBwZW5kKHRoaXMuYnV0dG9uKTtcclxuICB9XHJcbiAgLy8gYWRkS2V5Ym9hcmRBY3RpdmUoKSB7XHJcbiAgLy8gICB0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKCkgPT4ge1xyXG4gIC8vICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXlfYWN0aXZlJyk7XHJcbiAgLy8gICB9KTtcclxuICAvLyB9XHJcbiAgLy8gcmVtb3ZlS2V5Ym9hcmRBY3RpdmUoKSB7XHJcbiAgLy8gICB0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgpID0+IHtcclxuICAvLyAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSgna2V5X2FjdGl2ZScpO1xyXG4gIC8vICAgfSk7XHJcbiAgLy8gfVxyXG4gIHByZXNzS2V5KCkge1xyXG4gICAgY29uc29sZS5sb2coZXZlbnQpO1xyXG4gICAgaWYgKHRoaXMua2V5Y29kZSAhPT0gJ01ldGFMZWZ0JyAmJiB0aGlzLmtleWNvZGUgIT09ICdBbHRMZWZ0JyAmJiB0aGlzLmtleWNvZGUgIT09ICdBbHRSaWdodCcgJiYgdGhpcy5rZXljb2RlICE9PSAnQ29udHJvbExlZnQnICYmIHRoaXMua2V5Y29kZSAhPT0gJ0NvbnRyb2xSaWdodCcpIHtcclxuICAgICAgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0JhY2tzcGFjZScpIHtcclxuICAgICAgICBkZWxldGVQcmV2aW91c0xldHRlcigpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0RlbGV0ZScpIHtcclxuICAgICAgICBkZWxldGVOZXh0TGV0dGVyKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgbmV4dFN0cmluZygpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0Fycm93VXAnIHx8IHRoaXMua2V5Y29kZSA9PT0gJ0Fycm93RG93bicgfHwgdGhpcy5rZXljb2RlID09PSAnQXJyb3dMZWZ0JyB8fCB0aGlzLmtleWNvZGUgPT09ICdBcnJvd1JpZ2h0Jykge1xyXG4gICAgICAgIG1vdmVDdXJzb3IodGhpcy5rZXljb2RlKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdUYWInKSB7XHJcbiAgICAgICAgaW5zZXJ0VGFiKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnU3BhY2UnKSB7XHJcbiAgICAgICAgaW5zZXJ0U3BhY2UoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdTaGlmdExlZnQnIHx8IHRoaXMua2V5Y29kZSA9PT0gJ1NoaWZ0UmlnaHQnKSB7XHJcbiAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc0VuU2hpZnQpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0NhcHNMb2NrJykge1xyXG4gICAgICAgIHRvZ2dsZUNhcHNMb2NrKCk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRMYW5ndWFnZUVuKSB7XHJcbiAgICAgICAgICBpZiAoY2Fwc0xvY2tPbikge1xyXG4gICAgICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzRW5DYXBzTG9jayk7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcHNfYWN0aXZlJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzRW4pO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXBzX2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlbnRlckxldHRlcih0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICB1bnByZXNzS2V5KCkge1xyXG4gICAgY29uc29sZS5sb2coZXZlbnQpO1xyXG4gICAgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ1NoaWZ0TGVmdCcgfHwgdGhpcy5rZXljb2RlID09PSAnU2hpZnRSaWdodCcpIHtcclxuICAgICAgaWYgKGNhcHNMb2NrT24pIHtcclxuICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzRW5DYXBzTG9jayk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc0VuKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZW5hbWVLZXkobmV3S2V5KSB7XHJcbiAgICB0aGlzLmtleUxldHRlciA9IG5ld0tleTtcclxuICAgIGlmICh0aGlzLmtleWNvZGUgPT09ICdBcnJvd1VwJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSAnJiMxMjkwNDU7JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnQXJyb3dMZWZ0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSAnJiMxMjkwNDQ7JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnQXJyb3dEb3duJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSAnJiMxMjkwNDc7JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnQXJyb3dSaWdodCcpIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gJyYjMTI5MDQ2Oyc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ1NoaWZ0TGVmdCcgfHwgdGhpcy5rZXljb2RlID09PSAnU2hpZnRSaWdodCcpIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gbmV3S2V5ICsgJyAmIzg2ODI7JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnRW50ZXInKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9IHRoaXMua2V5Y29kZSArICcgJiM4NjI2Oyc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0JhY2tzcGFjZScpIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gdGhpcy5rZXljb2RlICsgJyAmIzEyOTA0NDsnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gbmV3S2V5O1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIG5hbWVBbGxLZXlzKGJ1dHRvbnNBcnIsIG5ld0tleXNBcnIpIHtcclxuICBidXR0b25zQXJyLmZvckVhY2goKGJ1dHRvbiwgbnVtYmVyKSA9PiB7XHJcbiAgICBidXR0b24ucmVuYW1lS2V5KG5ld0tleXNBcnJbbnVtYmVyXSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vVE9ETzog0JrQu9Cw0LLQuNGI0LAgV2luINC90LUg0L7RgtC60YDRi9Cy0LDQtdGCINC/0YPRgdC6LCDQtdGB0LvQuCDQvdCw0LbQsNGC0Ywg0LXQtSDQvNGL0YjQutC+0LkiLCJpbXBvcnQgeyBGaWVsZCB9IGZyb20gXCIuL2NsYXNzZXMvZmllbGRcIjtcclxuaW1wb3J0IHsga2V5Y29kZXMsIGtleUxldHRlcnNFbiwgS2V5IH0gZnJvbSBcIi4vY2xhc3Nlcy9rZXlcIjtcclxuaW1wb3J0IHsgYWRkS2V5Ym9hcmRMaXN0ZW5lciwgZm9jdXNUZXh0QXJlYSB9IGZyb20gXCIuL2Z1bmN0aW9ucy9nbG9iYWxFdmVudHNcIjtcclxuZXhwb3J0IHsgYnV0dG9uc0FyciB9O1xyXG5cclxuY29uc3QgZmllbGQgPSBuZXcgRmllbGQoKTtcclxuXHJcbmZpZWxkLmNyZWF0ZSgpO1xyXG5cclxuY29uc3QgYnV0dG9uc0FyciA9IFtdO1xyXG5cclxua2V5Y29kZXMuZm9yRWFjaCgoa2V5Y29kZSwgbnVtYmVyKSA9PiB7XHJcbiAgYnV0dG9uc0FycltudW1iZXJdID0gbmV3IEtleShrZXljb2RlLCBrZXlMZXR0ZXJzRW5bbnVtYmVyXSwgbnVtYmVyKTtcclxuICAvL2J1dHRvbnNBcnJbbnVtYmVyXS5hZGRLZXlib2FyZEFjdGl2ZSgpOyBcclxuICAvL2J1dHRvbnNBcnJbbnVtYmVyXS5yZW1vdmVLZXlib2FyZEFjdGl2ZSgpOyBcclxufSk7XHJcblxyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIHRleHRBcmVhLmZvY3VzKCk7XHJcbiAgYWRkS2V5Ym9hcmRMaXN0ZW5lcigpO1xyXG4gIGZvY3VzVGV4dEFyZWEoKTsiLCJleHBvcnQgeyBGaWVsZCB9O1xyXG5cclxuY2xhc3MgRmllbGQge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gIH1cclxuICBjcmVhdGUoKSB7XHJcbiAgICBjb25zdCBoZWFkZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IGhlYWRlckRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgY29uc3QgdGV4dEFyZWFEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcclxuICAgIGNvbnN0IGtleWJvYXJkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBmb290ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICBoZWFkZXJEaXYuY2xhc3NMaXN0LmFkZCgnaGVhZGVyLWRpdicpO1xyXG4gICAgaGVhZGVyRGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZCgnaGVhZGVyX19kZXNjcmlwdGlvbicpO1xyXG4gICAgdGV4dEFyZWFEaXYuY2xhc3NMaXN0LmFkZCgndGV4dC1hcmVhLWRpdicpO1xyXG4gICAgdGV4dEFyZWEuY2xhc3NMaXN0LmFkZCgndGV4dC1hcmVhJyk7XHJcbiAgICBrZXlib2FyZERpdi5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZC1kaXYnKTtcclxuICAgIGZvb3RlckRpdi5jbGFzc0xpc3QuYWRkKCdmb290ZXItZGl2Jyk7XHJcblxyXG4gICAgaGVhZGVyRGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gJ1RoaXMgdmlydHVhbCBrZXlib2FyZCBpcyBkZXNpZ25lZCBmb3Igd2luZG93cydcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChoZWFkZXJEaXYpO1xyXG4gICAgaGVhZGVyRGl2LmFwcGVuZChoZWFkZXJEZXNjcmlwdGlvbik7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0ZXh0QXJlYURpdik7XHJcbiAgICB0ZXh0QXJlYURpdi5hcHBlbmQodGV4dEFyZWEpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoa2V5Ym9hcmREaXYpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoZm9vdGVyRGl2KTtcclxuICB9O1xyXG59OyIsImV4cG9ydCB7IGFkZEtleWJvYXJkTGlzdGVuZXIsIGZvY3VzVGV4dEFyZWEgfTtcclxuaW1wb3J0IHsgYnV0dG9uc0FyciB9IGZyb20gJy4uL2luZGV4JztcclxuaW1wb3J0IHsgY2Fwc0xvY2tPbiB9IGZyb20gJy4uL2NsYXNzZXMva2V5J1xyXG5cclxuZnVuY3Rpb24gYWRkS2V5Ym9hcmRMaXN0ZW5lcigpIHtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXZlbnQpO1xyXG4gICAgaWYgKGV2ZW50LmlzVHJ1c3RlZCkge1xyXG4gICAgICBsZXQgdGhpc0J1dHRvbiA9ICcnO1xyXG4gICAgICBidXR0b25zQXJyLmZvckVhY2goYnV0dG9uT2JqID0+IHtcclxuICAgICAgICBpZiAoYnV0dG9uT2JqLmtleWNvZGUgPT09IGV2ZW50LmNvZGUpIHtcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB0aGlzQnV0dG9uID0gYnV0dG9uT2JqO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh0aGlzQnV0dG9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXNCdXR0b24ua2V5Y29kZSA9PT0gJ0NhcHNMb2NrJykge1xyXG4gICAgICAgICAgaWYgKGNhcHNMb2NrT24pIHtcclxuICAgICAgICAgICAgdGhpc0J1dHRvbi5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2Fwc19hY3RpdmUnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXNCdXR0b24uYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcHNfYWN0aXZlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXNCdXR0b24uYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tleV9hY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpc0J1dHRvbi5wcmVzc0tleSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgXHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhldmVudCk7XHJcbiAgICBpZiAoZXZlbnQuaXNUcnVzdGVkICYmIGV2ZW50LmNvZGUgIT09ICdDYXBzTG9jaycpIHtcclxuICAgICAgbGV0IHRoaXNCdXR0b24gPSAnJztcclxuICAgICAgYnV0dG9uc0Fyci5mb3JFYWNoKGJ1dHRvbk9iaiA9PiB7XHJcbiAgICAgICAgaWYgKGJ1dHRvbk9iai5rZXljb2RlID09PSBldmVudC5jb2RlKSB7XHJcbiAgICAgICAgICB0aGlzQnV0dG9uID0gYnV0dG9uT2JqO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh0aGlzQnV0dG9uKSB7XHJcbiAgICAgICAgdGhpc0J1dHRvbi5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSgna2V5X2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzQnV0dG9uLmtleWNvZGUgPT09ICdTaGlmdExlZnQnIHx8IHRoaXNCdXR0b24ua2V5Y29kZSA9PT0gJ1NoaWZ0UmlnaHQnKSB7XHJcbiAgICAgICAgdGhpc0J1dHRvbi51bnByZXNzS2V5KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9jdXNUZXh0QXJlYSgpIHtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gICAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICB9KTtcclxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImdldEN1cnNvclBvc2l0aW9ucyIsInRleHRBcmVhIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3RhcnQiLCJzZWxlY3Rpb25TdGFydCIsImVuZCIsInNlbGVjdGlvbkVuZCIsInBsYWNlQ3Vyc29yIiwiY3Vyc29yUG9zaXRpb25zIiwia2V5TGV0dGVyc0VuIiwia2V5TGV0dGVyc0VuQ2Fwc0xvY2siLCJrZXlMZXR0ZXJzRW5TaGlmdCIsImNhcHNMb2NrT24iLCJLZXkiLCJjb25zdHJ1Y3RvciIsImtleWNvZGUiLCJrZXlMZXR0ZXIiLCJudW1iZXIiLCJ0aGlzIiwiYnV0dG9uIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbmFtZUtleSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcmVzc0tleSIsImFwcGVuZCIsImNvbnNvbGUiLCJsb2ciLCJldmVudCIsInZhbHVlIiwic3Vic3RyaW5nIiwiZm9jdXMiLCJkZWxldGVQcmV2aW91c0xldHRlciIsImRlbGV0ZU5leHRMZXR0ZXIiLCJuZXh0U3RyaW5nIiwiYXJyb3ciLCJ0ZXh0IiwiY3VycmVudFN0cmluZ1Bvc2l0aW9uIiwiY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24iLCJwcmV2aW91c1N0cmluZ1N0YXJ0UG9zaXRpb24iLCJpIiwiY3VycmVudFN0cmluZ0VuZFBvc2l0aW9uIiwibGVuZ3RoIiwibmV4dFN0cmluZ0VuZFBvc2l0aW9uIiwibW92ZUN1cnNvciIsImluc2VydFRhYiIsImluc2VydFNwYWNlIiwibmFtZUFsbEtleXMiLCJidXR0b25zQXJyIiwicmVtb3ZlIiwiYnV0dG9uT2JqIiwiZW50ZXJMZXR0ZXIiLCJ1bnByZXNzS2V5IiwibmV3S2V5IiwiaW5uZXJIVE1MIiwibmV3S2V5c0FyciIsImZvckVhY2giLCJjcmVhdGUiLCJoZWFkZXJEaXYiLCJoZWFkZXJEZXNjcmlwdGlvbiIsInRleHRBcmVhRGl2Iiwia2V5Ym9hcmREaXYiLCJmb290ZXJEaXYiLCJpbm5lclRleHQiLCJib2R5IiwiaXNUcnVzdGVkIiwidGhpc0J1dHRvbiIsImNvZGUiLCJwcmV2ZW50RGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=