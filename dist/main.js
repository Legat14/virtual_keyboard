(()=>{"use strict";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){const e=document.querySelector(".text-area");return{start:e.selectionStart,end:e.selectionEnd}}function n(e){const t=document.querySelector(".text-area");t.selectionStart=e.start,t.selectionEnd=e.start}e.d({},{T:()=>p});const s=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],r=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","[","]","\\","Caps Lock","A","S","D","F","G","H","J","K","L",";","'","Enter","Shift","Z","X","C","V","B","N","M",",",".","/","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],a=["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Caps Lock","A","S","D","F","G","H","J","K","L",":",'"',"Enter","Shift","Z","X","C","V","B","N","M","<",">","?","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],o=["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Caps Lock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],i=["Ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","\\","Caps Lock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter","Shift","Я","Ч","С","М","И","Т","Ь","Б","Ю",".","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"],c=["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+","Backspace","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","/","Caps Lock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter","Shift","Я","Ч","С","М","И","Т","Ь","Б","Ю",",","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"];let d=!1,l=!0,u=!1,h=!1;"false"===localStorage.getItem("currentLanguageEn")&&(l=!1),window.addEventListener("beforeunload",(()=>{localStorage.setItem("currentLanguageEn",l)}));class f{constructor(e,t){this.keycode=e,this.button=document.createElement("button"),this.button.classList.add("key"),"ControlLeft"===e||"ControlRight"===e||"AltLeft"===e||"AltRight"===e||"MetaLeft"===e?this.button.classList.add("key-size-2"):"Tab"===e||"Backslash"===e?this.button.classList.add("key-size-3"):"Backspace"===e||"CapsLock"===e||"Enter"===e?this.button.classList.add("key-size-4"):"ShiftLeft"===e||"ShiftRight"===e?this.button.classList.add("key-size-5"):"Space"===e?this.button.classList.add("key-size-6"):this.button.classList.add("key-size-1"),this.renameKey(t),"ShiftLeft"!==e&&"ShiftRight"!==e?this.button.addEventListener("click",(()=>{this.pressKey()})):(this.button.addEventListener("mousedown",(()=>{this.pressKey()})),this.button.addEventListener("mouseup",(()=>{this.unpressKey()}))),document.querySelector(".keyboard-div").append(this.button)}pressKey(){"MetaLeft"!==this.keycode&&"AltLeft"!==this.keycode&&"AltRight"!==this.keycode&&"ControlLeft"!==this.keycode&&"ControlRight"!==this.keycode&&("Backspace"===this.keycode?function(){const e=document.querySelector(".text-area"),s=t();s.start===s.end?(e.value=e.value.substring(0,s.start-1)+e.value.substring(s.end),0!==s.start&&s.start--):e.value=e.value.substring(0,s.start)+e.value.substring(s.end),e.focus(),n(s)}():"Delete"===this.keycode?function(){const e=document.querySelector(".text-area"),s=t();s.start===s.end?e.value=e.value.substring(0,s.start)+e.value.substring(s.end+1):e.value=e.value.substring(0,s.start)+e.value.substring(s.end),e.focus(),n(s)}():"Enter"===this.keycode?function(){const e=document.querySelector(".text-area"),s=t();e.value=e.value.substring(0,s.start)+"\n"+e.value.substring(s.end),s.start++,e.focus(),n(s)}():"ArrowUp"===this.keycode||"ArrowDown"===this.keycode||"ArrowLeft"===this.keycode||"ArrowRight"===this.keycode?function(e){const s=document.querySelector(".text-area"),r=t();if("ArrowLeft"===e)0!==r.end&&r.end--,r.start=r.end;else if("ArrowRight"===e)r.end++,r.start=r.end;else if("ArrowUp"===e){const e=s.value;let t,n=0,a=0;for(let t=r.end-1;t>=0;t--)if("\n"===e[t]){n=t+1;break}t=r.end-n;for(let t=n-2;t>=0;t--)if("\n"===e[t]){a=t+1;break}r.end=a+t>=n?0===a&&0===n?0:n-1:a+t,r.start=r.end}else if("ArrowDown"===e){const e=s.value;let t,n=0,a=e.length,o=e.length;for(let t=r.end-1;t>=0;t--)if("\n"===e[t]){n=t+1;break}t=r.end-n;for(let t=r.end;t<e.length;t++)if("\n"===e[t]){a=t;break}for(let t=a+2;t<e.length;t++)if("\n"===e[t]){o=t;break}r.end=a+1+t>o?o:a+1+t,r.start=r.end}s.focus(),n(r)}(this.keycode):"Tab"===this.keycode?function(){const e=document.querySelector(".text-area"),s=t();e.value=e.value.substring(0,s.start)+"    "+e.value.substring(s.end),s.start+=4,e.focus(),n(s)}():"Space"===this.keycode?function(){const e=document.querySelector(".text-area"),s=t();e.value=e.value.substring(0,s.start)+" "+e.value.substring(s.end),s.start+=1,e.focus(),n(s)}():"ShiftLeft"===this.keycode||"ShiftRight"===this.keycode?y(p,l?a:c):"CapsLock"===this.keycode?(d=!d,l?d?(y(p,r),this.button.classList.add("caps_active")):(y(p,s),this.button.classList.remove("caps_active")):d?(y(p,i),this.button.classList.add("caps_active")):(y(p,o),this.button.classList.remove("caps_active"))):function(e){const s=document.querySelector(".text-area"),r=t();s.value=s.value.substring(0,r.start)+e.keyLetter+s.value.substring(r.end),r.start++,s.focus(),n(r)}(this))}unpressKey(){"ShiftLeft"!==this.keycode&&"ShiftRight"!==this.keycode||y(p,l?d?r:s:d?i:o)}renameKey(e){this.keyLetter=e,"ArrowUp"===this.keycode?this.button.innerHTML="&#129045;":"ArrowLeft"===this.keycode?this.button.innerHTML="&#129044;":"ArrowDown"===this.keycode?this.button.innerHTML="&#129047;":"ArrowRight"===this.keycode?this.button.innerHTML="&#129046;":"ShiftLeft"===this.keycode||"ShiftRight"===this.keycode?this.button.innerHTML=e+" &#8682;":"Enter"===this.keycode?this.button.innerHTML=this.keycode+" &#8626;":"Backspace"===this.keycode?this.button.innerHTML=this.keycode+" &#129044;":this.button.innerHTML=e}changeLanguage(){y(p,l?s:o)}}function y(e,t){e.forEach(((e,n)=>{e.renameKey(t[n])}))}(new class{constructor(){}create(){const e=document.createElement("header"),t=document.createElement("h1"),n=document.createElement("div"),s=document.createElement("p"),r=document.createElement("p"),a=document.createElement("p"),o=document.createElement("button"),i=document.createElement("div"),c=document.createElement("textarea"),d=document.createElement("div"),l=document.createElement("footer"),u=document.createElement("div"),h=document.createElement("p"),f=document.createElement("p"),y=document.createElement("a");e.classList.add("header-div"),s.classList.add("header__p"),r.classList.add("header__p"),a.classList.add("header__p"),o.classList.add("header__lang-change-button"),o.classList.add("key"),o.classList.add("key-size-2"),i.classList.add("text-area-div"),c.classList.add("text-area"),d.classList.add("keyboard-div"),l.classList.add("footer-div"),y.setAttribute("href","https://rs.school/"),y.setAttribute("target","_blank"),t.innerText="Virtual Keyboard (VK)",s.innerText="This virtual keyboard is designed for windows",r.innerText="To switch language press Left Alt + Left Ctrl",a.innerText="or press this button: ",o.innerText="En",h.innerHTML='<span>Developer: </span><a class="footer__a" href="https://github.com/Legat14" target="_blank">Ivan Zotov</a>',f.innerText="May of 2022",y.innerHTML='<img src="./assets/img/rs_school_js_w.svg" alt="RS School" width="180" height="67">',document.body.append(e),e.append(t),e.append(n),n.append(s),n.append(r),n.append(a),a.append(o),document.body.append(i),i.append(c),document.body.append(d),document.body.append(l),l.append(u),u.append(h),u.append(f),l.append(y)}}).create();const p=[];["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight","Delete"].forEach(((e,t)=>{p[t]=new f(e,l?s[t]:o[t])})),document.querySelector(".text-area").focus(),document.addEventListener("keydown",(()=>{if(event.isTrusted){let e="";p.forEach((t=>{t.keycode===event.code&&(event.preventDefault(),e=t)})),e&&("CapsLock"===e.keycode?d?e.button.classList.remove("caps_active"):e.button.classList.add("caps_active"):(e.button.classList.add("key_active"),"AltLeft"===e.keycode&&(u=!0),"ControlLeft"===e.keycode&&(h=!0),u&&h&&(l=!l,e.changeLanguage())),e.pressKey())}})),document.addEventListener("keyup",(()=>{if(event.isTrusted&&"CapsLock"!==event.code){let e="";p.forEach((t=>{t.keycode===event.code&&(e=t)})),e&&e.button.classList.remove("key_active"),"ShiftLeft"!==e.keycode&&"ShiftRight"!==e.keycode||e.unpressKey(),"AltLeft"===e.keycode&&(u=!1),"ControlLeft"===e.keycode&&(h=!1)}})),document.addEventListener("click",(()=>{document.querySelector(".text-area").focus()})),function(){const e=document.querySelector(".header__lang-change-button");e.innerText=l?"En":"Ru",e.addEventListener("click",(()=>{l=!l,e.innerText=l?"En":"Ru",p[0].changeLanguage()}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnB1Y2stZGVtby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYnB1Y2stZGVtby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYnB1Y2stZGVtby8uL3NyYy9mdW5jdGlvbnMvdGV4dEFyZWEuanMiLCJ3ZWJwYWNrOi8vd2VicHVjay1kZW1vLy4vc3JjL2NsYXNzZXMva2V5LmpzIiwid2VicGFjazovL3dlYnB1Y2stZGVtby8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vLi9zcmMvY2xhc3Nlcy9maWVsZC5qcyIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vLi9zcmMvZnVuY3Rpb25zL2dsb2JhbEV2ZW50cy5qcyIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vLi9zcmMvZnVuY3Rpb25zL2xhbmdTd2l0Y2hCdXR0b24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgeyBlbnRlckxldHRlciwgZGVsZXRlUHJldmlvdXNMZXR0ZXIsIGRlbGV0ZU5leHRMZXR0ZXIsIG5leHRTdHJpbmcsIG1vdmVDdXJzb3IsIGluc2VydFRhYiwgaW5zZXJ0U3BhY2UsIHRvZ2dsZUNhcHNMb2NrIH07XHJcbmltcG9ydCB7IGNhcHNMb2NrT24gfSBmcm9tICcuLi9jbGFzc2VzL2tleSdcclxuXHJcbmZ1bmN0aW9uIGdldEN1cnNvclBvc2l0aW9ucygpIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBzdGFydCA9IHRleHRBcmVhLnNlbGVjdGlvblN0YXJ0O1xyXG4gIGNvbnN0IGVuZCA9IHRleHRBcmVhLnNlbGVjdGlvbkVuZDtcclxuICByZXR1cm4ge1xyXG4gICAgc3RhcnQ6IHN0YXJ0LFxyXG4gICAgZW5kOiBlbmRcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucykge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIHRleHRBcmVhLnNlbGVjdGlvblN0YXJ0ID0gY3Vyc29yUG9zaXRpb25zLnN0YXJ0O1xyXG4gIHRleHRBcmVhLnNlbGVjdGlvbkVuZCA9IGN1cnNvclBvc2l0aW9ucy5zdGFydDtcclxufVxyXG5cclxuZnVuY3Rpb24gZW50ZXJMZXR0ZXIoYnV0dG9uT2JqKSB7XHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgY29uc3QgY3Vyc29yUG9zaXRpb25zID0gZ2V0Q3Vyc29yUG9zaXRpb25zKCk7XHJcbiAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zaXRpb25zLnN0YXJ0KSArIGJ1dHRvbk9iai5rZXlMZXR0ZXIgKyB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoY3Vyc29yUG9zaXRpb25zLmVuZCk7XHJcbiAgY3Vyc29yUG9zaXRpb25zLnN0YXJ0Kys7XHJcbiAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICBwbGFjZUN1cnNvcihjdXJzb3JQb3NpdGlvbnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVQcmV2aW91c0xldHRlcigpIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBjdXJzb3JQb3NpdGlvbnMgPSBnZXRDdXJzb3JQb3NpdGlvbnMoKTtcclxuICBpZiAoY3Vyc29yUG9zaXRpb25zLnN0YXJ0ID09PSBjdXJzb3JQb3NpdGlvbnMuZW5kKSB7XHJcbiAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgLSAxKSArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICAgIGlmIChjdXJzb3JQb3NpdGlvbnMuc3RhcnQgIT09IDApIHtcclxuICAgICAgY3Vyc29yUG9zaXRpb25zLnN0YXJ0LS07XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvc2l0aW9ucy5zdGFydCkgKyB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoY3Vyc29yUG9zaXRpb25zLmVuZCk7XHJcbiAgfVxyXG4gIHRleHRBcmVhLmZvY3VzKCk7XHJcbiAgcGxhY2VDdXJzb3IoY3Vyc29yUG9zaXRpb25zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlTmV4dExldHRlcigpIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBjdXJzb3JQb3NpdGlvbnMgPSBnZXRDdXJzb3JQb3NpdGlvbnMoKTtcclxuICBpZiAoY3Vyc29yUG9zaXRpb25zLnN0YXJ0ID09PSBjdXJzb3JQb3NpdGlvbnMuZW5kKSB7XHJcbiAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQpICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQgKyAxKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zaXRpb25zLnN0YXJ0KSArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICB9XHJcbiAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICBwbGFjZUN1cnNvcihjdXJzb3JQb3NpdGlvbnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBuZXh0U3RyaW5nKCkge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IGN1cnNvclBvc2l0aW9ucyA9IGdldEN1cnNvclBvc2l0aW9ucygpO1xyXG4gIHRleHRBcmVhLnZhbHVlID0gdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvc2l0aW9ucy5zdGFydCkgKyAnXFxuJyArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQrKztcclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vdmVDdXJzb3IoYXJyb3cpIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBjdXJzb3JQb3NpdGlvbnMgPSBnZXRDdXJzb3JQb3NpdGlvbnMoKTtcclxuICBpZiAoYXJyb3cgPT09ICdBcnJvd0xlZnQnKSB7XHJcbiAgICBpZiAoY3Vyc29yUG9zaXRpb25zLmVuZCAhPT0gMCkge1xyXG4gICAgICBjdXJzb3JQb3NpdGlvbnMuZW5kLS07XHJcbiAgICB9XHJcbiAgICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgPSBjdXJzb3JQb3NpdGlvbnMuZW5kO1xyXG4gIH0gZWxzZSBpZiAoYXJyb3cgPT09ICdBcnJvd1JpZ2h0Jykge1xyXG4gICAgY3Vyc29yUG9zaXRpb25zLmVuZCsrO1xyXG4gICAgY3Vyc29yUG9zaXRpb25zLnN0YXJ0ID0gY3Vyc29yUG9zaXRpb25zLmVuZDtcclxuICB9IGVsc2UgaWYgKGFycm93ID09PSAnQXJyb3dVcCcpIHtcclxuICAgIGNvbnN0IHRleHQgPSB0ZXh0QXJlYS52YWx1ZTtcclxuICAgIGxldCBjdXJyZW50U3RyaW5nUG9zaXRpb247XHJcbiAgICBsZXQgY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24gPSAwO1xyXG4gICAgbGV0IHByZXZpb3VzU3RyaW5nU3RhcnRQb3NpdGlvbiA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gY3Vyc29yUG9zaXRpb25zLmVuZCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgIGlmICh0ZXh0W2ldID09PSAnXFxuJykge1xyXG4gICAgICAgIGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uID0gaSArIDE7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGN1cnJlbnRTdHJpbmdQb3NpdGlvbiA9IGN1cnNvclBvc2l0aW9ucy5lbmQgLSBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbjtcclxuICAgIGZvciAobGV0IGkgPSBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbiAtIDI7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgIGlmICh0ZXh0W2ldID09PSAnXFxuJykge1xyXG4gICAgICAgIHByZXZpb3VzU3RyaW5nU3RhcnRQb3NpdGlvbiA9IGkgKyAxO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocHJldmlvdXNTdHJpbmdTdGFydFBvc2l0aW9uICsgY3VycmVudFN0cmluZ1Bvc2l0aW9uID49IGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uKSB7XHJcbiAgICAgIGlmIChwcmV2aW91c1N0cmluZ1N0YXJ0UG9zaXRpb24gPT09IDAgJiYgY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24gPT09IDApIHtcclxuICAgICAgICBjdXJzb3JQb3NpdGlvbnMuZW5kID0gMDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjdXJzb3JQb3NpdGlvbnMuZW5kID0gY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24gLSAxO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjdXJzb3JQb3NpdGlvbnMuZW5kID0gcHJldmlvdXNTdHJpbmdTdGFydFBvc2l0aW9uICsgY3VycmVudFN0cmluZ1Bvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgY3Vyc29yUG9zaXRpb25zLnN0YXJ0ID0gY3Vyc29yUG9zaXRpb25zLmVuZDtcclxuICB9IGVsc2UgaWYgKGFycm93ID09PSAnQXJyb3dEb3duJykge1xyXG4gICAgY29uc3QgdGV4dCA9IHRleHRBcmVhLnZhbHVlO1xyXG4gICAgbGV0IGN1cnJlbnRTdHJpbmdQb3NpdGlvbjtcclxuICAgIGxldCBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbiA9IDA7XHJcbiAgICBsZXQgY3VycmVudFN0cmluZ0VuZFBvc2l0aW9uID0gdGV4dC5sZW5ndGg7XHJcbiAgICBsZXQgbmV4dFN0cmluZ0VuZFBvc2l0aW9uID0gdGV4dC5sZW5ndGg7XHJcbiAgICBmb3IgKGxldCBpID0gY3Vyc29yUG9zaXRpb25zLmVuZCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgIGlmICh0ZXh0W2ldID09PSAnXFxuJykge1xyXG4gICAgICAgIGN1cnJlbnRTdHJpbmdTdGFydFBvc2l0aW9uID0gaSArIDE7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGN1cnJlbnRTdHJpbmdQb3NpdGlvbiA9IGN1cnNvclBvc2l0aW9ucy5lbmQgLSBjdXJyZW50U3RyaW5nU3RhcnRQb3NpdGlvbjtcclxuICAgIGZvciAobGV0IGkgPSBjdXJzb3JQb3NpdGlvbnMuZW5kOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodGV4dFtpXSA9PT0gJ1xcbicpIHtcclxuICAgICAgICBjdXJyZW50U3RyaW5nRW5kUG9zaXRpb24gPSBpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gY3VycmVudFN0cmluZ0VuZFBvc2l0aW9uICsgMjsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHRleHRbaV0gPT09ICdcXG4nKSB7XHJcbiAgICAgICAgbmV4dFN0cmluZ0VuZFBvc2l0aW9uID0gaTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGN1cnJlbnRTdHJpbmdFbmRQb3NpdGlvbiArIDEgKyBjdXJyZW50U3RyaW5nUG9zaXRpb24gPiBuZXh0U3RyaW5nRW5kUG9zaXRpb24pIHtcclxuICAgICAgY3Vyc29yUG9zaXRpb25zLmVuZCA9IG5leHRTdHJpbmdFbmRQb3NpdGlvbjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN1cnNvclBvc2l0aW9ucy5lbmQgPSBjdXJyZW50U3RyaW5nRW5kUG9zaXRpb24gKyAxICsgY3VycmVudFN0cmluZ1Bvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgY3Vyc29yUG9zaXRpb25zLnN0YXJ0ID0gY3Vyc29yUG9zaXRpb25zLmVuZDtcclxuICB9XHJcbiAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICBwbGFjZUN1cnNvcihjdXJzb3JQb3NpdGlvbnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbnNlcnRUYWIoKSB7XHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgY29uc3QgY3Vyc29yUG9zaXRpb25zID0gZ2V0Q3Vyc29yUG9zaXRpb25zKCk7XHJcbiAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zaXRpb25zLnN0YXJ0KSArICcgICAgJyArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgKz0gNDtcclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIHBsYWNlQ3Vyc29yKGN1cnNvclBvc2l0aW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydFNwYWNlKCkge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IGN1cnNvclBvc2l0aW9ucyA9IGdldEN1cnNvclBvc2l0aW9ucygpO1xyXG4gIHRleHRBcmVhLnZhbHVlID0gdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvc2l0aW9ucy5zdGFydCkgKyAnICcgKyB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoY3Vyc29yUG9zaXRpb25zLmVuZCk7XHJcbiAgY3Vyc29yUG9zaXRpb25zLnN0YXJ0ICs9IDE7XHJcbiAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICBwbGFjZUN1cnNvcihjdXJzb3JQb3NpdGlvbnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVDYXBzTG9jaygpIHtcclxuICBpZiAoY2Fwc0xvY2tPbikge1xyXG4gICAgY2Fwc0xvY2tPbiA9IGZhbHNlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjYXBzTG9ja09uID0gdHJ1ZTtcclxuICB9XHJcbn0iLCJpbXBvcnQge1xyXG4gIGVudGVyTGV0dGVyLFxyXG4gIGRlbGV0ZVByZXZpb3VzTGV0dGVyLFxyXG4gIGRlbGV0ZU5leHRMZXR0ZXIsXHJcbiAgbmV4dFN0cmluZyxcclxuICBtb3ZlQ3Vyc29yLFxyXG4gIGluc2VydFRhYixcclxuICBpbnNlcnRTcGFjZSxcclxuICB0b2dnbGVDYXBzTG9ja1xyXG59IGZyb20gJy4uL2Z1bmN0aW9ucy90ZXh0QXJlYSc7XHJcbmltcG9ydCB7XHJcbiAgYnV0dG9uc0FyclxyXG59IGZyb20gJy4uL2luZGV4JztcclxuXHJcbmV4cG9ydCB7XHJcbiAga2V5Y29kZXMsXHJcbiAga2V5TGV0dGVyc0VuLFxyXG4gIGtleUxldHRlcnNSdSxcclxuICBjYXBzTG9ja09uLFxyXG4gIGN1cnJlbnRMYW5ndWFnZUVuLFxyXG4gIGFsdExlZnRQcmVzc2VkLFxyXG4gIGN0cmxMZWZ0UHJlc3NlZCxcclxuICBLZXlcclxufTtcclxuXHJcbmNvbnN0IGtleWNvZGVzID0gWydCYWNrcXVvdGUnLCAnRGlnaXQxJywgJ0RpZ2l0MicsICdEaWdpdDMnLCAnRGlnaXQ0JywgJ0RpZ2l0NScsICdEaWdpdDYnLCAnRGlnaXQ3JywgJ0RpZ2l0OCcsICdEaWdpdDknLCAnRGlnaXQwJyxcclxuICAnTWludXMnLCAnRXF1YWwnLCAnQmFja3NwYWNlJywgJ1RhYicsICdLZXlRJywgJ0tleVcnLCAnS2V5RScsICdLZXlSJywgJ0tleVQnLCAnS2V5WScsICdLZXlVJywgJ0tleUknLCAnS2V5TycsICdLZXlQJyxcclxuICAnQnJhY2tldExlZnQnLCAnQnJhY2tldFJpZ2h0JywgJ0JhY2tzbGFzaCcsICdDYXBzTG9jaycsICdLZXlBJywgJ0tleVMnLCAnS2V5RCcsICdLZXlGJywgJ0tleUcnLCAnS2V5SCcsICdLZXlKJywgJ0tleUsnLFxyXG4gICdLZXlMJywgJ1NlbWljb2xvbicsICdRdW90ZScsICdFbnRlcicsICdTaGlmdExlZnQnLCAnS2V5WicsICdLZXlYJywgJ0tleUMnLCAnS2V5VicsICdLZXlCJywgJ0tleU4nLCAnS2V5TScsICdDb21tYScsICdQZXJpb2QnLFxyXG4gICdTbGFzaCcsICdBcnJvd1VwJywgJ1NoaWZ0UmlnaHQnLCAnQ29udHJvbExlZnQnLCAnTWV0YUxlZnQnLCAnQWx0TGVmdCcsICdTcGFjZScsICdBbHRSaWdodCcsICdDb250cm9sUmlnaHQnLCAnQXJyb3dMZWZ0JyxcclxuICAnQXJyb3dEb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsZXRlJ1xyXG5dO1xyXG5jb25zdCBrZXlMZXR0ZXJzRW4gPSBbJ2AnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMCcsICctJywgJz0nLCAnQmFja3NwYWNlJywgJ1RhYicsICdxJywgJ3cnLCAnZScsICdyJywgJ3QnLCAneScsXHJcbiAgJ3UnLCAnaScsICdvJywgJ3AnLCAnWycsICddJywgJ1xcXFwnLCAnQ2FwcyBMb2NrJywgJ2EnLCAncycsICdkJywgJ2YnLCAnZycsICdoJywgJ2onLCAnaycsICdsJywgJzsnLCAnXFwnJywgJ0VudGVyJywgJ1NoaWZ0JyxcclxuICAneicsICd4JywgJ2MnLCAndicsICdiJywgJ24nLCAnbScsICcsJywgJy4nLCAnLycsICdBcnJvd1VwJywgJ1NoaWZ0JywgJ0N0cmwnLCAnV2luJywgJ0FsdCcsICdTcGFjZScsICdBbHQnLCAnQ3RybCcsICdBcnJvd0xlZnQnLFxyXG4gICdBcnJvd0xlZnREb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsJ1xyXG5dO1xyXG5jb25zdCBrZXlMZXR0ZXJzRW5DYXBzTG9jayA9IFsnYCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcwJywgJy0nLCAnPScsICdCYWNrc3BhY2UnLCAnVGFiJywgJ1EnLCAnVycsICdFJywgJ1InLCAnVCcsICdZJyxcclxuICAnVScsICdJJywgJ08nLCAnUCcsICdbJywgJ10nLCAnXFxcXCcsICdDYXBzIExvY2snLCAnQScsICdTJywgJ0QnLCAnRicsICdHJywgJ0gnLCAnSicsICdLJywgJ0wnLCAnOycsICdcXCcnLCAnRW50ZXInLCAnU2hpZnQnLFxyXG4gICdaJywgJ1gnLCAnQycsICdWJywgJ0InLCAnTicsICdNJywgJywnLCAnLicsICcvJywgJ0Fycm93VXAnLCAnU2hpZnQnLCAnQ3RybCcsICdXaW4nLCAnQWx0JywgJ1NwYWNlJywgJ0FsdCcsICdDdHJsJywgJ0Fycm93TGVmdCcsXHJcbiAgJ0Fycm93TGVmdERvd24nLCAnQXJyb3dSaWdodCcsICdEZWwnXHJcbl07XHJcbmNvbnN0IGtleUxldHRlcnNFblNoaWZ0ID0gWyd+JywgJyEnLCAnQCcsICcjJywgJyQnLCAnJScsICdeJywgJyYnLCAnKicsICcoJywgJyknLCAnXycsICcrJywgJ0JhY2tzcGFjZScsICdUYWInLCAnUScsICdXJywgJ0UnLCAnUicsICdUJywgJ1knLFxyXG4gICdVJywgJ0knLCAnTycsICdQJywgJ3snLCAnfScsICd8JywgJ0NhcHMgTG9jaycsICdBJywgJ1MnLCAnRCcsICdGJywgJ0cnLCAnSCcsICdKJywgJ0snLCAnTCcsICc6JywgJ1wiJywgJ0VudGVyJywgJ1NoaWZ0JyxcclxuICAnWicsICdYJywgJ0MnLCAnVicsICdCJywgJ04nLCAnTScsICc8JywgJz4nLCAnPycsICdBcnJvd1VwJywgJ1NoaWZ0JywgJ0N0cmwnLCAnV2luJywgJ0FsdCcsICdTcGFjZScsICdBbHQnLCAnQ3RybCcsICdBcnJvd0xlZnQnLFxyXG4gICdBcnJvd0xlZnREb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsJ1xyXG5dO1xyXG5jb25zdCBrZXlMZXR0ZXJzUnUgPSBbJ9GRJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzAnLCAnLScsICc9JywgJ0JhY2tzcGFjZScsICdUYWInLCAn0LknLCAn0YYnLCAn0YMnLCAn0LonLCAn0LUnLCAn0L0nLFxyXG4gICfQsycsICfRiCcsICfRiScsICfQtycsICfRhScsICfRiicsICdcXFxcJywgJ0NhcHMgTG9jaycsICfRhCcsICfRiycsICfQsicsICfQsCcsICfQvycsICfRgCcsICfQvicsICfQuycsICfQtCcsICfQticsICfRjScsICdFbnRlcicsICdTaGlmdCcsXHJcbiAgJ9GPJywgJ9GHJywgJ9GBJywgJ9C8JywgJ9C4JywgJ9GCJywgJ9GMJywgJ9CxJywgJ9GOJywgJy4nLCAnQXJyb3dVcCcsICdTaGlmdCcsICdDdHJsJywgJ1dpbicsICdBbHQnLCAnU3BhY2UnLCAnQWx0JywgJ0N0cmwnLCAnQXJyb3dMZWZ0JyxcclxuICAnQXJyb3dMZWZ0RG93bicsICdBcnJvd1JpZ2h0JywgJ0RlbCdcclxuXTtcclxuY29uc3Qga2V5TGV0dGVyc1J1Q2Fwc0xvY2sgPSBbJ9CBJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzAnLCAnLScsICc9JywgJ0JhY2tzcGFjZScsICdUYWInLCAn0JknLCAn0KYnLCAn0KMnLCAn0JonLCAn0JUnLCAn0J0nLFxyXG4gICfQkycsICfQqCcsICfQqScsICfQlycsICfQpScsICfQqicsICdcXFxcJywgJ0NhcHMgTG9jaycsICfQpCcsICfQqycsICfQkicsICfQkCcsICfQnycsICfQoCcsICfQnicsICfQmycsICfQlCcsICfQlicsICfQrScsICdFbnRlcicsICdTaGlmdCcsXHJcbiAgJ9CvJywgJ9CnJywgJ9ChJywgJ9CcJywgJ9CYJywgJ9CiJywgJ9CsJywgJ9CRJywgJ9CuJywgJy4nLCAnQXJyb3dVcCcsICdTaGlmdCcsICdDdHJsJywgJ1dpbicsICdBbHQnLCAnU3BhY2UnLCAnQWx0JywgJ0N0cmwnLCAnQXJyb3dMZWZ0JyxcclxuICAnQXJyb3dMZWZ0RG93bicsICdBcnJvd1JpZ2h0JywgJ0RlbCdcclxuXTtcclxuY29uc3Qga2V5TGV0dGVyc1J1U2hpZnQgPSBbJ9CBJywgJyEnLCAnXCInLCAn4oSWJywgJzsnLCAnJScsICc6JywgJz8nLCAnKicsICcoJywgJyknLCAnXycsICcrJywgJ0JhY2tzcGFjZScsICdUYWInLCAn0JknLCAn0KYnLCAn0KMnLCAn0JonLCAn0JUnLCAn0J0nLFxyXG4gICfQkycsICfQqCcsICfQqScsICfQlycsICfQpScsICfQqicsICcvJywgJ0NhcHMgTG9jaycsICfQpCcsICfQqycsICfQkicsICfQkCcsICfQnycsICfQoCcsICfQnicsICfQmycsICfQlCcsICfQlicsICfQrScsICdFbnRlcicsICdTaGlmdCcsXHJcbiAgJ9CvJywgJ9CnJywgJ9ChJywgJ9CcJywgJ9CYJywgJ9CiJywgJ9CsJywgJ9CRJywgJ9CuJywgJywnLCAnQXJyb3dVcCcsICdTaGlmdCcsICdDdHJsJywgJ1dpbicsICdBbHQnLCAnU3BhY2UnLCAnQWx0JywgJ0N0cmwnLCAnQXJyb3dMZWZ0JyxcclxuICAnQXJyb3dMZWZ0RG93bicsICdBcnJvd1JpZ2h0JywgJ0RlbCdcclxuXTtcclxuXHJcbmxldCBjYXBzTG9ja09uID0gZmFsc2U7XHJcbmxldCBjdXJyZW50TGFuZ3VhZ2VFbiA9IHRydWU7XHJcbmxldCBhbHRMZWZ0UHJlc3NlZCA9IGZhbHNlO1xyXG5sZXQgY3RybExlZnRQcmVzc2VkID0gZmFsc2U7XHJcblxyXG5pZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRMYW5ndWFnZUVuJykgPT09ICdmYWxzZScpIHtcclxuICBjdXJyZW50TGFuZ3VhZ2VFbiA9IGZhbHNlO1xyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4ge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50TGFuZ3VhZ2VFbicsIGN1cnJlbnRMYW5ndWFnZUVuKTtcclxufSk7XHJcblxyXG5jbGFzcyBLZXkge1xyXG4gIGNvbnN0cnVjdG9yKGtleWNvZGUsIGtleUxldHRlcikge1xyXG4gICAgdGhpcy5rZXljb2RlID0ga2V5Y29kZTtcclxuICAgIHRoaXMuYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXknKTtcclxuICAgIGlmIChrZXljb2RlID09PSAnQ29udHJvbExlZnQnIHx8IGtleWNvZGUgPT09ICdDb250cm9sUmlnaHQnIHx8IGtleWNvZGUgPT09ICdBbHRMZWZ0JyB8fCBrZXljb2RlID09PSAnQWx0UmlnaHQnIHx8IGtleWNvZGUgPT09ICdNZXRhTGVmdCcpIHtcclxuICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LmFkZCgna2V5LXNpemUtMicpO1xyXG4gICAgfSBlbHNlIGlmIChrZXljb2RlID09PSAnVGFiJyB8fCBrZXljb2RlID09PSAnQmFja3NsYXNoJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS0zJyk7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdCYWNrc3BhY2UnIHx8IGtleWNvZGUgPT09ICdDYXBzTG9jaycgfHwga2V5Y29kZSA9PT0gJ0VudGVyJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS00Jyk7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdTaGlmdExlZnQnIHx8IGtleWNvZGUgPT09ICdTaGlmdFJpZ2h0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS01Jyk7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdTcGFjZScpIHtcclxuICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LmFkZCgna2V5LXNpemUtNicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LmFkZCgna2V5LXNpemUtMScpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVuYW1lS2V5KGtleUxldHRlcik7XHJcblxyXG4gICAgaWYgKGtleWNvZGUgIT09ICdTaGlmdExlZnQnICYmIGtleWNvZGUgIT09ICdTaGlmdFJpZ2h0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLnByZXNzS2V5KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucHJlc3NLZXkoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy51bnByZXNzS2V5KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGtleWJvYXJkRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmtleWJvYXJkLWRpdicpO1xyXG4gICAga2V5Ym9hcmREaXYuYXBwZW5kKHRoaXMuYnV0dG9uKTtcclxuICB9XHJcbiAgcHJlc3NLZXkoKSB7XHJcbiAgICBpZiAodGhpcy5rZXljb2RlICE9PSAnTWV0YUxlZnQnICYmIHRoaXMua2V5Y29kZSAhPT0gJ0FsdExlZnQnICYmIHRoaXMua2V5Y29kZSAhPT0gJ0FsdFJpZ2h0JyAmJiB0aGlzLmtleWNvZGUgIT09ICdDb250cm9sTGVmdCcgJiYgdGhpcy5rZXljb2RlICE9PSAnQ29udHJvbFJpZ2h0Jykge1xyXG4gICAgICBpZiAodGhpcy5rZXljb2RlID09PSAnQmFja3NwYWNlJykge1xyXG4gICAgICAgIGRlbGV0ZVByZXZpb3VzTGV0dGVyKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnRGVsZXRlJykge1xyXG4gICAgICAgIGRlbGV0ZU5leHRMZXR0ZXIoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdFbnRlcicpIHtcclxuICAgICAgICBuZXh0U3RyaW5nKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnQXJyb3dVcCcgfHwgdGhpcy5rZXljb2RlID09PSAnQXJyb3dEb3duJyB8fCB0aGlzLmtleWNvZGUgPT09ICdBcnJvd0xlZnQnIHx8IHRoaXMua2V5Y29kZSA9PT0gJ0Fycm93UmlnaHQnKSB7XHJcbiAgICAgICAgbW92ZUN1cnNvcih0aGlzLmtleWNvZGUpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ1RhYicpIHtcclxuICAgICAgICBpbnNlcnRUYWIoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdTcGFjZScpIHtcclxuICAgICAgICBpbnNlcnRTcGFjZSgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ1NoaWZ0TGVmdCcgfHwgdGhpcy5rZXljb2RlID09PSAnU2hpZnRSaWdodCcpIHtcclxuICAgICAgICBpZiAoY3VycmVudExhbmd1YWdlRW4pIHtcclxuICAgICAgICAgIG5hbWVBbGxLZXlzKGJ1dHRvbnNBcnIsIGtleUxldHRlcnNFblNoaWZ0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc1J1U2hpZnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdDYXBzTG9jaycpIHtcclxuICAgICAgICB0b2dnbGVDYXBzTG9jaygpO1xyXG4gICAgICAgIGlmIChjdXJyZW50TGFuZ3VhZ2VFbikge1xyXG4gICAgICAgICAgaWYgKGNhcHNMb2NrT24pIHtcclxuICAgICAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc0VuQ2Fwc0xvY2spO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXBzX2FjdGl2ZScpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc0VuKTtcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2Fwc19hY3RpdmUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGNhcHNMb2NrT24pIHtcclxuICAgICAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc1J1Q2Fwc0xvY2spO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXBzX2FjdGl2ZScpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmFtZUFsbEtleXMoYnV0dG9uc0Fyciwga2V5TGV0dGVyc1J1KTtcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2Fwc19hY3RpdmUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZW50ZXJMZXR0ZXIodGhpcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgdW5wcmVzc0tleSgpIHtcclxuICAgIGlmICh0aGlzLmtleWNvZGUgPT09ICdTaGlmdExlZnQnIHx8IHRoaXMua2V5Y29kZSA9PT0gJ1NoaWZ0UmlnaHQnKSB7XHJcbiAgICAgIGlmIChjdXJyZW50TGFuZ3VhZ2VFbikge1xyXG4gICAgICAgIGlmIChjYXBzTG9ja09uKSB7XHJcbiAgICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzRW5DYXBzTG9jayk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG5hbWVBbGxLZXlzKGJ1dHRvbnNBcnIsIGtleUxldHRlcnNFbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChjYXBzTG9ja09uKSB7XHJcbiAgICAgICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzUnVDYXBzTG9jayk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG5hbWVBbGxLZXlzKGJ1dHRvbnNBcnIsIGtleUxldHRlcnNSdSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlbmFtZUtleShuZXdLZXkpIHtcclxuICAgIHRoaXMua2V5TGV0dGVyID0gbmV3S2V5O1xyXG4gICAgaWYgKHRoaXMua2V5Y29kZSA9PT0gJ0Fycm93VXAnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9ICcmIzEyOTA0NTsnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdBcnJvd0xlZnQnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9ICcmIzEyOTA0NDsnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdBcnJvd0Rvd24nKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9ICcmIzEyOTA0NzsnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdBcnJvd1JpZ2h0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSAnJiMxMjkwNDY7JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnU2hpZnRMZWZ0JyB8fCB0aGlzLmtleWNvZGUgPT09ICdTaGlmdFJpZ2h0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSBuZXdLZXkgKyAnICYjODY4MjsnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmtleWNvZGUgPT09ICdFbnRlcicpIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gdGhpcy5rZXljb2RlICsgJyAmIzg2MjY7JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnQmFja3NwYWNlJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSB0aGlzLmtleWNvZGUgKyAnICYjMTI5MDQ0Oyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSBuZXdLZXk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNoYW5nZUxhbmd1YWdlKCkge1xyXG4gICAgaWYgKGN1cnJlbnRMYW5ndWFnZUVuKSB7XHJcbiAgICAgIG5hbWVBbGxLZXlzKGJ1dHRvbnNBcnIsIGtleUxldHRlcnNFbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuYW1lQWxsS2V5cyhidXR0b25zQXJyLCBrZXlMZXR0ZXJzUnUpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIG5hbWVBbGxLZXlzKGJ1dHRvbnNBcnIsIG5ld0tleXNBcnIpIHtcclxuICBidXR0b25zQXJyLmZvckVhY2goKGJ1dHRvbiwgbnVtYmVyKSA9PiB7XHJcbiAgICBidXR0b24ucmVuYW1lS2V5KG5ld0tleXNBcnJbbnVtYmVyXSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vVE9ETzog0J/RgNC+0LLQtdGA0LjRgtGMINC70LjQvdGC0LXRgNC+0LxcclxuLy8g0JTQvtCx0LDQstC40YLRjCDRgdC60YDQuNC90YjQvtGCIiwiaW1wb3J0IHsgRmllbGQgfSBmcm9tIFwiLi9jbGFzc2VzL2ZpZWxkXCI7XHJcbmltcG9ydCB7IGtleWNvZGVzLCBrZXlMZXR0ZXJzRW4sIGtleUxldHRlcnNSdSwgY3VycmVudExhbmd1YWdlRW4sIEtleSB9IGZyb20gXCIuL2NsYXNzZXMva2V5XCI7XHJcbmltcG9ydCB7IGFkZEtleWJvYXJkTGlzdGVuZXIsIGZvY3VzVGV4dEFyZWEgfSBmcm9tIFwiLi9mdW5jdGlvbnMvZ2xvYmFsRXZlbnRzXCI7XHJcbmltcG9ydCB7IGNoYW5nZUxhbmd1YWdlQnlCdXR0b24gfSBmcm9tIFwiLi9mdW5jdGlvbnMvbGFuZ1N3aXRjaEJ1dHRvblwiO1xyXG5leHBvcnQgeyBidXR0b25zQXJyIH07XHJcblxyXG5jb25zdCBmaWVsZCA9IG5ldyBGaWVsZCgpO1xyXG5cclxuZmllbGQuY3JlYXRlKCk7XHJcblxyXG5jb25zdCBidXR0b25zQXJyID0gW107XHJcblxyXG5rZXljb2Rlcy5mb3JFYWNoKChrZXljb2RlLCBudW1iZXIpID0+IHtcclxuICBpZiAoY3VycmVudExhbmd1YWdlRW4pIHtcclxuICAgIGJ1dHRvbnNBcnJbbnVtYmVyXSA9IG5ldyBLZXkoa2V5Y29kZSwga2V5TGV0dGVyc0VuW251bWJlcl0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b25zQXJyW251bWJlcl0gPSBuZXcgS2V5KGtleWNvZGUsIGtleUxldHRlcnNSdVtudW1iZXJdKTtcclxuICB9XHJcbn0pO1xyXG5cclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIGFkZEtleWJvYXJkTGlzdGVuZXIoKTtcclxuICBmb2N1c1RleHRBcmVhKCk7XHJcbiAgY2hhbmdlTGFuZ3VhZ2VCeUJ1dHRvbigpOyIsImV4cG9ydCB7IEZpZWxkIH07XHJcblxyXG5jbGFzcyBGaWVsZCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgfVxyXG4gIGNyZWF0ZSgpIHtcclxuICAgIGNvbnN0IGhlYWRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hlYWRlcicpO1xyXG4gICAgY29uc3QgaGVhZGVyVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xyXG4gICAgY29uc3QgaGVhZGVyRGl2RGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IGhlYWRlckRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgY29uc3QgaGVhZGVyTGFuZ0NhbmdlSW5zdHJ1Y3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBjb25zdCBoZWFkZXJMYW5nQ2FuZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBjb25zdCBoZWFkZXJMYW5nQ2FuZ2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIGNvbnN0IHRleHRBcmVhRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XHJcbiAgICBjb25zdCBrZXlib2FyZERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZm9vdGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9vdGVyJyk7XHJcbiAgICBjb25zdCBmb290ZXJEZXZlbG9wbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZm9vdGVyRGV2ZWxvcG1lbnRQRGV2ZWxvcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgY29uc3QgZm9vdGVyRGV2ZWxvcG1lbnRQWWVhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIGNvbnN0IGZvb3RlckNvdXJzZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcblxyXG4gICAgaGVhZGVyRGl2LmNsYXNzTGlzdC5hZGQoJ2hlYWRlci1kaXYnKTtcclxuICAgIGhlYWRlckRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcl9fcCcpO1xyXG4gICAgaGVhZGVyTGFuZ0NhbmdlSW5zdHJ1Y3Rpb24uY2xhc3NMaXN0LmFkZCgnaGVhZGVyX19wJyk7XHJcbiAgICBoZWFkZXJMYW5nQ2FuZ2VEaXYuY2xhc3NMaXN0LmFkZCgnaGVhZGVyX19wJyk7XHJcbiAgICBoZWFkZXJMYW5nQ2FuZ2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGVhZGVyX19sYW5nLWNoYW5nZS1idXR0b24nKTtcclxuICAgIGhlYWRlckxhbmdDYW5nZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXknKTtcclxuICAgIGhlYWRlckxhbmdDYW5nZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS0yJyk7XHJcbiAgICB0ZXh0QXJlYURpdi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWFyZWEtZGl2Jyk7XHJcbiAgICB0ZXh0QXJlYS5jbGFzc0xpc3QuYWRkKCd0ZXh0LWFyZWEnKTtcclxuICAgIGtleWJvYXJkRGl2LmNsYXNzTGlzdC5hZGQoJ2tleWJvYXJkLWRpdicpO1xyXG4gICAgZm9vdGVyRGl2LmNsYXNzTGlzdC5hZGQoJ2Zvb3Rlci1kaXYnKTtcclxuXHJcbiAgICBmb290ZXJDb3Vyc2VMaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsICdodHRwczovL3JzLnNjaG9vbC8nKTtcclxuICAgIGZvb3RlckNvdXJzZUxpbmsuc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XHJcblxyXG4gICAgaGVhZGVyVGl0bGUuaW5uZXJUZXh0ID0gJ1ZpcnR1YWwgS2V5Ym9hcmQgKFZLKSdcclxuICAgIGhlYWRlckRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICdUaGlzIHZpcnR1YWwga2V5Ym9hcmQgaXMgZGVzaWduZWQgZm9yIHdpbmRvd3MnXHJcbiAgICBoZWFkZXJMYW5nQ2FuZ2VJbnN0cnVjdGlvbi5pbm5lclRleHQgPSAnVG8gc3dpdGNoIGxhbmd1YWdlIHByZXNzIExlZnQgQWx0ICsgTGVmdCBDdHJsJ1xyXG4gICAgaGVhZGVyTGFuZ0NhbmdlRGl2LmlubmVyVGV4dCA9ICdvciBwcmVzcyB0aGlzIGJ1dHRvbjogJ1xyXG4gICAgaGVhZGVyTGFuZ0NhbmdlQnV0dG9uLmlubmVyVGV4dCA9ICdFbidcclxuICAgIGZvb3RlckRldmVsb3BtZW50UERldmVsb3Blci5pbm5lckhUTUwgPSAnPHNwYW4+RGV2ZWxvcGVyOiA8L3NwYW4+PGEgY2xhc3M9XCJmb290ZXJfX2FcIiBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL0xlZ2F0MTRcIiB0YXJnZXQ9XCJfYmxhbmtcIj5JdmFuIFpvdG92PC9hPidcclxuICAgIGZvb3RlckRldmVsb3BtZW50UFllYXIuaW5uZXJUZXh0ID0gJ01heSBvZiAyMDIyJ1xyXG4gICAgZm9vdGVyQ291cnNlTGluay5pbm5lckhUTUwgPSAnPGltZyBzcmM9XCIuL2Fzc2V0cy9pbWcvcnNfc2Nob29sX2pzX3cuc3ZnXCIgYWx0PVwiUlMgU2Nob29sXCIgd2lkdGg9XCIxODBcIiBoZWlnaHQ9XCI2N1wiPidcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChoZWFkZXJEaXYpO1xyXG4gICAgaGVhZGVyRGl2LmFwcGVuZChoZWFkZXJUaXRsZSk7XHJcbiAgICBoZWFkZXJEaXYuYXBwZW5kKGhlYWRlckRpdkRlc2NyaXB0aW9uKTtcclxuICAgIGhlYWRlckRpdkRlc2NyaXB0aW9uLmFwcGVuZChoZWFkZXJEZXNjcmlwdGlvbik7XHJcbiAgICBoZWFkZXJEaXZEZXNjcmlwdGlvbi5hcHBlbmQoaGVhZGVyTGFuZ0NhbmdlSW5zdHJ1Y3Rpb24pO1xyXG4gICAgaGVhZGVyRGl2RGVzY3JpcHRpb24uYXBwZW5kKGhlYWRlckxhbmdDYW5nZURpdik7XHJcbiAgICBoZWFkZXJMYW5nQ2FuZ2VEaXYuYXBwZW5kKGhlYWRlckxhbmdDYW5nZUJ1dHRvbik7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0ZXh0QXJlYURpdik7XHJcbiAgICB0ZXh0QXJlYURpdi5hcHBlbmQodGV4dEFyZWEpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoa2V5Ym9hcmREaXYpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoZm9vdGVyRGl2KTtcclxuICAgIGZvb3RlckRpdi5hcHBlbmQoZm9vdGVyRGV2ZWxvcG1lbnQpO1xyXG4gICAgZm9vdGVyRGV2ZWxvcG1lbnQuYXBwZW5kKGZvb3RlckRldmVsb3BtZW50UERldmVsb3Blcik7XHJcbiAgICBmb290ZXJEZXZlbG9wbWVudC5hcHBlbmQoZm9vdGVyRGV2ZWxvcG1lbnRQWWVhcik7XHJcbiAgICBmb290ZXJEaXYuYXBwZW5kKGZvb3RlckNvdXJzZUxpbmspO1xyXG4gIH07XHJcbn07IiwiZXhwb3J0IHsgYWRkS2V5Ym9hcmRMaXN0ZW5lciwgZm9jdXNUZXh0QXJlYSB9O1xyXG5pbXBvcnQgeyBidXR0b25zQXJyIH0gZnJvbSAnLi4vaW5kZXgnO1xyXG5pbXBvcnQgeyBjYXBzTG9ja09uLCBjdXJyZW50TGFuZ3VhZ2VFbiwgYWx0TGVmdFByZXNzZWQsIGN0cmxMZWZ0UHJlc3NlZCwgfSBmcm9tICcuLi9jbGFzc2VzL2tleSdcclxuXHJcbmZ1bmN0aW9uIGFkZEtleWJvYXJkTGlzdGVuZXIoKSB7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsICgpID0+IHtcclxuICAgIGlmIChldmVudC5pc1RydXN0ZWQpIHtcclxuICAgICAgbGV0IHRoaXNCdXR0b24gPSAnJztcclxuICAgICAgYnV0dG9uc0Fyci5mb3JFYWNoKGJ1dHRvbk9iaiA9PiB7XHJcbiAgICAgICAgaWYgKGJ1dHRvbk9iai5rZXljb2RlID09PSBldmVudC5jb2RlKSB7XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgdGhpc0J1dHRvbiA9IGJ1dHRvbk9iajtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHRoaXNCdXR0b24pIHtcclxuICAgICAgICBpZiAodGhpc0J1dHRvbi5rZXljb2RlID09PSAnQ2Fwc0xvY2snKSB7XHJcbiAgICAgICAgICBpZiAoY2Fwc0xvY2tPbikge1xyXG4gICAgICAgICAgICB0aGlzQnV0dG9uLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXBzX2FjdGl2ZScpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpc0J1dHRvbi5idXR0b24uY2xhc3NMaXN0LmFkZCgnY2Fwc19hY3RpdmUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpc0J1dHRvbi5idXR0b24uY2xhc3NMaXN0LmFkZCgna2V5X2FjdGl2ZScpO1xyXG4gICAgICAgICAgaWYgKHRoaXNCdXR0b24ua2V5Y29kZSA9PT0gJ0FsdExlZnQnKSB7XHJcbiAgICAgICAgICAgIGFsdExlZnRQcmVzc2VkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICh0aGlzQnV0dG9uLmtleWNvZGUgPT09ICdDb250cm9sTGVmdCcpIHtcclxuICAgICAgICAgICAgY3RybExlZnRQcmVzc2VkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChhbHRMZWZ0UHJlc3NlZCAmJiBjdHJsTGVmdFByZXNzZWQpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYW5ndWFnZUVuKSB7XHJcbiAgICAgICAgICAgICAgY3VycmVudExhbmd1YWdlRW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjdXJyZW50TGFuZ3VhZ2VFbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpc0J1dHRvbi5jaGFuZ2VMYW5ndWFnZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzQnV0dG9uLnByZXNzS2V5KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgpID0+IHtcclxuICAgIGlmIChldmVudC5pc1RydXN0ZWQgJiYgZXZlbnQuY29kZSAhPT0gJ0NhcHNMb2NrJykge1xyXG4gICAgICBsZXQgdGhpc0J1dHRvbiA9ICcnO1xyXG4gICAgICBidXR0b25zQXJyLmZvckVhY2goYnV0dG9uT2JqID0+IHtcclxuICAgICAgICBpZiAoYnV0dG9uT2JqLmtleWNvZGUgPT09IGV2ZW50LmNvZGUpIHtcclxuICAgICAgICAgIHRoaXNCdXR0b24gPSBidXR0b25PYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHRoaXNCdXR0b24pIHtcclxuICAgICAgICB0aGlzQnV0dG9uLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdrZXlfYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXNCdXR0b24ua2V5Y29kZSA9PT0gJ1NoaWZ0TGVmdCcgfHwgdGhpc0J1dHRvbi5rZXljb2RlID09PSAnU2hpZnRSaWdodCcpIHtcclxuICAgICAgICB0aGlzQnV0dG9uLnVucHJlc3NLZXkoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpc0J1dHRvbi5rZXljb2RlID09PSAnQWx0TGVmdCcpIHtcclxuICAgICAgICBhbHRMZWZ0UHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzQnV0dG9uLmtleWNvZGUgPT09ICdDb250cm9sTGVmdCcpIHtcclxuICAgICAgICBjdHJsTGVmdFByZXNzZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb2N1c1RleHRBcmVhKCkge1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgICB0ZXh0QXJlYS5mb2N1cygpO1xyXG4gIH0pO1xyXG59IiwiZXhwb3J0IHsgY2hhbmdlTGFuZ3VhZ2VCeUJ1dHRvbiB9XHJcbmltcG9ydCB7IGJ1dHRvbnNBcnIgfSBmcm9tICcuLi9pbmRleCdcclxuaW1wb3J0IHsgY3VycmVudExhbmd1YWdlRW4gfSBmcm9tICcuLi9jbGFzc2VzL2tleSdcclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUxhbmd1YWdlQnlCdXR0b24oKSB7XHJcbiAgY29uc3QgY2hhbmdlTGFuZ0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xhbmctY2hhbmdlLWJ1dHRvbicpO1xyXG4gIGlmIChjdXJyZW50TGFuZ3VhZ2VFbikge1xyXG4gICAgY2hhbmdlTGFuZ0J1dHRvbi5pbm5lclRleHQgPSAnRW4nO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjaGFuZ2VMYW5nQnV0dG9uLmlubmVyVGV4dCA9ICdSdSc7XHJcbiAgfVxyXG4gIGNoYW5nZUxhbmdCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBjdXJyZW50TGFuZ3VhZ2VFbiA9ICFjdXJyZW50TGFuZ3VhZ2VFbjtcclxuICAgIGlmIChjdXJyZW50TGFuZ3VhZ2VFbikge1xyXG4gICAgICBjaGFuZ2VMYW5nQnV0dG9uLmlubmVyVGV4dCA9ICdFbic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjaGFuZ2VMYW5nQnV0dG9uLmlubmVyVGV4dCA9ICdSdSc7XHJcbiAgICB9XHJcbiAgICBidXR0b25zQXJyWzBdLmNoYW5nZUxhbmd1YWdlKCk7XHJcbiAgfSk7XHJcbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJnZXRDdXJzb3JQb3NpdGlvbnMiLCJ0ZXh0QXJlYSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0YXJ0Iiwic2VsZWN0aW9uU3RhcnQiLCJlbmQiLCJzZWxlY3Rpb25FbmQiLCJwbGFjZUN1cnNvciIsImN1cnNvclBvc2l0aW9ucyIsImtleUxldHRlcnNFbiIsImtleUxldHRlcnNFbkNhcHNMb2NrIiwia2V5TGV0dGVyc0VuU2hpZnQiLCJrZXlMZXR0ZXJzUnUiLCJrZXlMZXR0ZXJzUnVDYXBzTG9jayIsImtleUxldHRlcnNSdVNoaWZ0IiwiY2Fwc0xvY2tPbiIsImN1cnJlbnRMYW5ndWFnZUVuIiwiYWx0TGVmdFByZXNzZWQiLCJjdHJsTGVmdFByZXNzZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEl0ZW0iLCJLZXkiLCJjb25zdHJ1Y3RvciIsImtleWNvZGUiLCJrZXlMZXR0ZXIiLCJ0aGlzIiwiYnV0dG9uIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbmFtZUtleSIsInByZXNzS2V5IiwidW5wcmVzc0tleSIsImFwcGVuZCIsInZhbHVlIiwic3Vic3RyaW5nIiwiZm9jdXMiLCJkZWxldGVQcmV2aW91c0xldHRlciIsImRlbGV0ZU5leHRMZXR0ZXIiLCJuZXh0U3RyaW5nIiwiYXJyb3ciLCJ0ZXh0IiwiY3VycmVudFN0cmluZ1Bvc2l0aW9uIiwiY3VycmVudFN0cmluZ1N0YXJ0UG9zaXRpb24iLCJwcmV2aW91c1N0cmluZ1N0YXJ0UG9zaXRpb24iLCJpIiwiY3VycmVudFN0cmluZ0VuZFBvc2l0aW9uIiwibGVuZ3RoIiwibmV4dFN0cmluZ0VuZFBvc2l0aW9uIiwibW92ZUN1cnNvciIsImluc2VydFRhYiIsImluc2VydFNwYWNlIiwibmFtZUFsbEtleXMiLCJidXR0b25zQXJyIiwicmVtb3ZlIiwiYnV0dG9uT2JqIiwiZW50ZXJMZXR0ZXIiLCJuZXdLZXkiLCJpbm5lckhUTUwiLCJjaGFuZ2VMYW5ndWFnZSIsIm5ld0tleXNBcnIiLCJmb3JFYWNoIiwibnVtYmVyIiwiY3JlYXRlIiwiaGVhZGVyRGl2IiwiaGVhZGVyVGl0bGUiLCJoZWFkZXJEaXZEZXNjcmlwdGlvbiIsImhlYWRlckRlc2NyaXB0aW9uIiwiaGVhZGVyTGFuZ0NhbmdlSW5zdHJ1Y3Rpb24iLCJoZWFkZXJMYW5nQ2FuZ2VEaXYiLCJoZWFkZXJMYW5nQ2FuZ2VCdXR0b24iLCJ0ZXh0QXJlYURpdiIsImtleWJvYXJkRGl2IiwiZm9vdGVyRGl2IiwiZm9vdGVyRGV2ZWxvcG1lbnQiLCJmb290ZXJEZXZlbG9wbWVudFBEZXZlbG9wZXIiLCJmb290ZXJEZXZlbG9wbWVudFBZZWFyIiwiZm9vdGVyQ291cnNlTGluayIsInNldEF0dHJpYnV0ZSIsImlubmVyVGV4dCIsImJvZHkiLCJldmVudCIsImlzVHJ1c3RlZCIsInRoaXNCdXR0b24iLCJjb2RlIiwicHJldmVudERlZmF1bHQiLCJjaGFuZ2VMYW5nQnV0dG9uIiwiY2hhbmdlTGFuZ3VhZ2VCeUJ1dHRvbiJdLCJzb3VyY2VSb290IjoiIn0=