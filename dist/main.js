(()=>{"use strict";var e={d:(t,s)=>{for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){const e=document.querySelector(".text-area"),t=e.selectionStart,s=e.selectionEnd;return console.log(t,s),{start:t,end:s}}function s(e){const t=document.querySelector(".text-area");t.selectionStart=e.start,t.selectionEnd=e.start}e.d({},{T:()=>r});const a=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","ArrowUp","Shift","Ctrl","Win","Alt","Space","Alt","Ctrl","ArrowLeft","ArrowLeftDown","ArrowRight","Del"];class o{constructor(e,t,s){this.keycode=e,this.keyLetter=t,this.number=s,this.button=document.createElement("button"),this.button.classList.add("key"),"ControlLeft"===e||"ControlRight"===e||"AltLeft"===e||"AltRight"===e||"MetaLeft"===e?this.button.classList.add("key-size-2"):"Tab"===e||"Backslash"===e?this.button.classList.add("key-size-3"):"Backspace"===e||"CapsLock"===e||"Enter"===e?this.button.classList.add("key-size-4"):"ShiftLeft"===e||"ShiftRight"===e?this.button.classList.add("key-size-5"):"Space"===e?this.button.classList.add("key-size-6"):this.button.classList.add("key-size-1"),this.button.innerHTML="ArrowUp"===e?"&#129045;":"ArrowLeft"===e?"&#129044;":"ArrowDown"===e?"&#129047;":"ArrowRight"===e?"&#129046;":"ShiftLeft"===e||"ShiftRight"===e?t+" &#8682;":"Enter"===e?e+" &#8626;":"Backspace"===e?e+" &#129044;":t,this.button.addEventListener("click",(()=>{this.pressKey()})),document.querySelector(".keyboard-div").append(this.button)}addKeyboardActive(){this.button.addEventListener("keydown",(()=>{this.button.classList.add("key_active")}))}removeKeyboardActive(){this.button.addEventListener("keyup",(()=>{this.button.classList.remove("key_active")}))}pressKey(){console.log(this.keycode),"Backspace"===this.keycode?function(){const e=document.querySelector(".text-area"),a=t();a.start===a.end?(e.value=e.value.substring(0,a.start-1)+e.value.substring(a.end),0!==a.start&&a.start--):e.value=e.value.substring(0,a.start)+e.value.substring(a.end),e.focus(),s(a)}():"Enter"===this.keycode?function(){const e=document.querySelector(".text-area"),a=t();e.value=e.value.substring(0,a.start)+"\n"+e.value.substring(a.end),a.start++,e.focus(),s(a)}():function(e){const a=document.querySelector(".text-area"),o=t();a.value=a.value.substring(0,o.start)+e.keyLetter+a.value.substring(o.end),o.start++,a.focus(),s(o)}(this)}}(new class{constructor(){}create(){const e=document.createElement("div"),t=document.createElement("div"),s=document.createElement("textarea"),a=document.createElement("div"),o=document.createElement("div");e.classList.add("header-div"),t.classList.add("text-area-div"),s.classList.add("text-area"),a.classList.add("keyboard-div"),o.classList.add("footer-div"),document.body.append(e),document.body.append(t),t.append(s),document.body.append(a),document.body.append(o)}}).create();const r=[];["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight","Delete"].forEach(((e,t)=>{r[t]=new o(e,a[t],t),r[t].addKeyboardActive(),r[t].removeKeyboardActive()})),document.querySelector(".text-area").focus(),document.addEventListener("keydown",(()=>{if(event.isTrusted){let e="";r.forEach((t=>{event.preventDefault(),t.keycode===event.code&&(e=t)})),e&&(e.button.classList.add("key_active"),e.pressKey())}})),document.addEventListener("keyup",(()=>{if(event.isTrusted){let e="";r.forEach((t=>{t.keycode===event.code&&(e=t)})),e&&e.button.classList.remove("key_active")}})),document.addEventListener("click",(()=>{document.querySelector(".text-area").focus()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVc1QixPQUFPRSxVQUFVQyxJQUFJLGNBQ2hDeUIsRUFBV3RCLGdCQUtqQnZCLFNBQVNzQixpQkFBaUIsU0FBUyxLQUNqQyxHQUFJcUIsTUFBTUMsVUFBVyxDQUNuQixJQUFJQyxFQUFhLEdBQ2pCSixFQUFXQyxTQUFRVCxJQUNiQSxFQUFVcEIsVUFBWThCLE1BQU1JLE9BQzlCRixFQUFhWixNQUdiWSxHQUNGQSxFQUFXNUIsT0FBT0UsVUFBVVEsT0FBTyxrQkFPekMzQixTQUFTc0IsaUJBQWlCLFNBQVMsS0FDaEJ0QixTQUFTQyxjQUFjLGNBQy9CNkIsWSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnB1Y2stZGVtby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYnB1Y2stZGVtby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYnB1Y2stZGVtby8uL3NyYy9mdW5jdGlvbnMvdGV4dEFyZWEuanMiLCJ3ZWJwYWNrOi8vd2VicHVjay1kZW1vLy4vc3JjL2NsYXNzZXMva2V5LmpzIiwid2VicGFjazovL3dlYnB1Y2stZGVtby8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vLi9zcmMvY2xhc3Nlcy9maWVsZC5qcyIsIndlYnBhY2s6Ly93ZWJwdWNrLWRlbW8vLi9zcmMvZnVuY3Rpb25zL2dsb2JhbEV2ZW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCB7IGVudGVyTGV0dGVyLCBkZWxldGVQcmV2b3VzTGV0dGVyLCBuZXh0U3RyaW5nIH07XHJcblxyXG5mdW5jdGlvbiBnZXRDdXJzb3JQb3NpdGlvbnMoKSB7XHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgY29uc3Qgc3RhcnQgPSB0ZXh0QXJlYS5zZWxlY3Rpb25TdGFydDtcclxuICBjb25zdCBlbmQgPSB0ZXh0QXJlYS5zZWxlY3Rpb25FbmQ7XHJcbiAgY29uc29sZS5sb2coc3RhcnQsIGVuZCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIHN0YXJ0OiBzdGFydCxcclxuICAgIGVuZDogZW5kXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwbGFjZUN1cnNvcihjdXJzb3JQb3NpdGlvbnMpIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICB0ZXh0QXJlYS5zZWxlY3Rpb25TdGFydCA9IGN1cnNvclBvc2l0aW9ucy5zdGFydDtcclxuICB0ZXh0QXJlYS5zZWxlY3Rpb25FbmQgPSBjdXJzb3JQb3NpdGlvbnMuc3RhcnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVudGVyTGV0dGVyKGJ1dHRvbk9iaikge1xyXG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRleHQtYXJlYScpO1xyXG4gIGNvbnN0IGN1cnNvclBvc2l0aW9ucyA9IGdldEN1cnNvclBvc2l0aW9ucygpO1xyXG4gIHRleHRBcmVhLnZhbHVlID0gdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvc2l0aW9ucy5zdGFydCkgKyBidXR0b25PYmoua2V5TGV0dGVyICsgdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnNvclBvc2l0aW9ucy5lbmQpO1xyXG4gIGN1cnNvclBvc2l0aW9ucy5zdGFydCsrO1xyXG4gIHRleHRBcmVhLmZvY3VzKCk7XHJcbiAgcGxhY2VDdXJzb3IoY3Vyc29yUG9zaXRpb25zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlUHJldm91c0xldHRlcigpIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBjdXJzb3JQb3NpdGlvbnMgPSBnZXRDdXJzb3JQb3NpdGlvbnMoKTtcclxuICBpZiAoY3Vyc29yUG9zaXRpb25zLnN0YXJ0ID09PSBjdXJzb3JQb3NpdGlvbnMuZW5kKSB7XHJcbiAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQgLSAxKSArIHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJzb3JQb3NpdGlvbnMuZW5kKTtcclxuICAgIGlmIChjdXJzb3JQb3NpdGlvbnMuc3RhcnQgIT09IDApIHtcclxuICAgICAgY3Vyc29yUG9zaXRpb25zLnN0YXJ0LS07XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dEFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvc2l0aW9ucy5zdGFydCkgKyB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoY3Vyc29yUG9zaXRpb25zLmVuZCk7XHJcbiAgfVxyXG4gIHRleHRBcmVhLmZvY3VzKCk7XHJcbiAgcGxhY2VDdXJzb3IoY3Vyc29yUG9zaXRpb25zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbmV4dFN0cmluZygpIHtcclxuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICBjb25zdCBjdXJzb3JQb3NpdGlvbnMgPSBnZXRDdXJzb3JQb3NpdGlvbnMoKTtcclxuICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRBcmVhLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3NpdGlvbnMuc3RhcnQpICsgJ1xcbicgKyB0ZXh0QXJlYS52YWx1ZS5zdWJzdHJpbmcoY3Vyc29yUG9zaXRpb25zLmVuZCk7XHJcbiAgY3Vyc29yUG9zaXRpb25zLnN0YXJ0Kys7XHJcbiAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICBwbGFjZUN1cnNvcihjdXJzb3JQb3NpdGlvbnMpO1xyXG59IiwiaW1wb3J0IHsgZW50ZXJMZXR0ZXIsIGRlbGV0ZVByZXZvdXNMZXR0ZXIsIG5leHRTdHJpbmcgfSBmcm9tIFwiLi4vZnVuY3Rpb25zL3RleHRBcmVhXCI7XHJcblxyXG5leHBvcnQge1xyXG4gIGtleWNvZGVzLFxyXG4gIGtleUxldHRlcnNFbixcclxuICBLZXlcclxufTtcclxuXHJcbmNvbnN0IGtleWNvZGVzID0gWydCYWNrcXVvdGUnLCAnRGlnaXQxJywgJ0RpZ2l0MicsICdEaWdpdDMnLCAnRGlnaXQ0JywgJ0RpZ2l0NScsICdEaWdpdDYnLCAnRGlnaXQ3JywgJ0RpZ2l0OCcsICdEaWdpdDknLCAnRGlnaXQwJyxcclxuICAnTWludXMnLCAnRXF1YWwnLCAnQmFja3NwYWNlJywgJ1RhYicsICdLZXlRJywgJ0tleVcnLCAnS2V5RScsICdLZXlSJywgJ0tleVQnLCAnS2V5WScsICdLZXlVJywgJ0tleUknLCAnS2V5TycsICdLZXlQJyxcclxuICAnQnJhY2tldExlZnQnLCAnQnJhY2tldFJpZ2h0JywgJ0JhY2tzbGFzaCcsICdDYXBzTG9jaycsICdLZXlBJywgJ0tleVMnLCAnS2V5RCcsICdLZXlGJywgJ0tleUcnLCAnS2V5SCcsICdLZXlKJywgJ0tleUsnLFxyXG4gICdLZXlMJywgJ1NlbWljb2xvbicsICdRdW90ZScsICdFbnRlcicsICdTaGlmdExlZnQnLCAnS2V5WicsICdLZXlYJywgJ0tleUMnLCAnS2V5VicsICdLZXlCJywgJ0tleU4nLCAnS2V5TScsICdDb21tYScsICdQZXJpb2QnLFxyXG4gICdTbGFzaCcsICdBcnJvd1VwJywgJ1NoaWZ0UmlnaHQnLCAnQ29udHJvbExlZnQnLCAnTWV0YUxlZnQnLCAnQWx0TGVmdCcsICdTcGFjZScsICdBbHRSaWdodCcsICdDb250cm9sUmlnaHQnLCAnQXJyb3dMZWZ0JyxcclxuICAnQXJyb3dEb3duJywgJ0Fycm93UmlnaHQnLCAnRGVsZXRlJ107XHJcbmNvbnN0IGtleUxldHRlcnNFbiA9IFsnYCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcwJywgJy0nLCAnPScsICdCYWNrc3BhY2UnLCAnVGFiJywgJ3EnLCAndycsICdlJywgJ3InLCAndCcsICd5JyxcclxuICAndScsICdpJywgJ28nLCAncCcsICdbJywgJ10nLCAnXFxcXCcsICdDYXBzIExvY2snLCAnYScsICdzJywgJ2QnLCAnZicsICdnJywgJ2gnLCAnaicsICdrJywgJ2wnLCAnOycsICdcXCcnLCAnRW50ZXInLCAnU2hpZnQnLFxyXG4gICd6JywgJ3gnLCAnYycsICd2JywgJ2InLCAnbicsICdtJywgJywnLCAnLicsICcvJywgJ0Fycm93VXAnLCAnU2hpZnQnLCAnQ3RybCcsICdXaW4nLCAnQWx0JywgJ1NwYWNlJywgJ0FsdCcsICdDdHJsJywgJ0Fycm93TGVmdCcsXHJcbiAgJ0Fycm93TGVmdERvd24nLCAnQXJyb3dSaWdodCcsICdEZWwnXTtcclxuXHJcbmNsYXNzIEtleSB7XHJcbiAgY29uc3RydWN0b3Ioa2V5Y29kZSwga2V5TGV0dGVyLCBudW1iZXIpIHtcclxuICAgIHRoaXMua2V5Y29kZSA9IGtleWNvZGU7XHJcbiAgICB0aGlzLmtleUxldHRlciA9IGtleUxldHRlcjtcclxuICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xyXG4gICAgdGhpcy5idXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tleScpO1xyXG4gICAgaWYgKGtleWNvZGUgPT09ICdDb250cm9sTGVmdCcgfHwga2V5Y29kZSA9PT0gJ0NvbnRyb2xSaWdodCcgfHwga2V5Y29kZSA9PT0gJ0FsdExlZnQnIHx8IGtleWNvZGUgPT09ICdBbHRSaWdodCcgfHwga2V5Y29kZSA9PT0gJ01ldGFMZWZ0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS0yJyk7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdUYWInIHx8IGtleWNvZGUgPT09ICdCYWNrc2xhc2gnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tleS1zaXplLTMnKTtcclxuICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gJ0JhY2tzcGFjZScgfHwga2V5Y29kZSA9PT0gJ0NhcHNMb2NrJyB8fCBrZXljb2RlID09PSAnRW50ZXInKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tleS1zaXplLTQnKTtcclxuICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gJ1NoaWZ0TGVmdCcgfHwga2V5Y29kZSA9PT0gJ1NoaWZ0UmlnaHQnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tleS1zaXplLTUnKTtcclxuICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gJ1NwYWNlJykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS02Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXktc2l6ZS0xJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoa2V5Y29kZSA9PT0gJ0Fycm93VXAnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9ICcmIzEyOTA0NTsnO1xyXG4gICAgfSBlbHNlIGlmIChrZXljb2RlID09PSAnQXJyb3dMZWZ0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSAnJiMxMjkwNDQ7JztcclxuICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gJ0Fycm93RG93bicpIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gJyYjMTI5MDQ3Oyc7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdBcnJvd1JpZ2h0Jykge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSAnJiMxMjkwNDY7JztcclxuICAgIH0gZWxzZSBpZiAoa2V5Y29kZSA9PT0gJ1NoaWZ0TGVmdCcgfHwga2V5Y29kZSA9PT0gJ1NoaWZ0UmlnaHQnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9IGtleUxldHRlciArICcgJiM4NjgyOyc7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdFbnRlcicpIHtcclxuICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0ga2V5Y29kZSArICcgJiM4NjI2Oyc7XHJcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09ICdCYWNrc3BhY2UnKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9IGtleWNvZGUgKyAnICYjMTI5MDQ0Oyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5pbm5lckhUTUwgPSBrZXlMZXR0ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMucHJlc3NLZXkoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGtleWJvYXJkRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmtleWJvYXJkLWRpdicpO1xyXG4gICAga2V5Ym9hcmREaXYuYXBwZW5kKHRoaXMuYnV0dG9uKTtcclxuICB9XHJcbiAgYWRkS2V5Ym9hcmRBY3RpdmUoKSB7XHJcbiAgICB0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrZXlfYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgcmVtb3ZlS2V5Ym9hcmRBY3RpdmUoKSB7XHJcbiAgICB0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgpID0+IHtcclxuICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSgna2V5X2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHByZXNzS2V5KCkge1xyXG4gICAgY29uc29sZS5sb2codGhpcy5rZXljb2RlKTtcclxuICAgIGlmICh0aGlzLmtleWNvZGUgPT09ICdCYWNrc3BhY2UnKSB7XHJcbiAgICAgIGRlbGV0ZVByZXZvdXNMZXR0ZXIoKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5rZXljb2RlID09PSAnRW50ZXInKSB7XHJcbiAgICAgIG5leHRTdHJpbmcoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVudGVyTGV0dGVyKHRoaXMpO1xyXG4gICAgfVxyXG4gIH1cclxufTsiLCJpbXBvcnQgeyBGaWVsZCB9IGZyb20gXCIuL2NsYXNzZXMvZmllbGRcIjtcclxuaW1wb3J0IHsga2V5Y29kZXMsIGtleUxldHRlcnNFbiwgS2V5IH0gZnJvbSBcIi4vY2xhc3Nlcy9rZXlcIjtcclxuaW1wb3J0IHsgYWRkS2V5Ym9hcmRMaXN0ZW5lciwgZm9jdXNUZXh0QXJlYSB9IGZyb20gXCIuL2Z1bmN0aW9ucy9nbG9iYWxFdmVudHNcIjtcclxuZXhwb3J0IHsgYnV0dG9uc0FyciB9O1xyXG5cclxuY29uc3QgZmllbGQgPSBuZXcgRmllbGQoKTtcclxuXHJcbmZpZWxkLmNyZWF0ZSgpO1xyXG5cclxuY29uc3QgYnV0dG9uc0FyciA9IFtdO1xyXG5cclxua2V5Y29kZXMuZm9yRWFjaCgoa2V5Y29kZSwgbnVtYmVyKSA9PiB7XHJcbiAgYnV0dG9uc0FycltudW1iZXJdID0gbmV3IEtleShrZXljb2RlLCBrZXlMZXR0ZXJzRW5bbnVtYmVyXSwgbnVtYmVyKTtcclxuICBidXR0b25zQXJyW251bWJlcl0uYWRkS2V5Ym9hcmRBY3RpdmUoKTsgXHJcbiAgYnV0dG9uc0FycltudW1iZXJdLnJlbW92ZUtleWJvYXJkQWN0aXZlKCk7IFxyXG59KTtcclxuXHJcbiAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1hcmVhJyk7XHJcbiAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICBhZGRLZXlib2FyZExpc3RlbmVyKCk7XHJcbiAgZm9jdXNUZXh0QXJlYSgpOyIsImV4cG9ydCB7IEZpZWxkIH07XHJcblxyXG5jbGFzcyBGaWVsZCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgfVxyXG4gIGNyZWF0ZSgpIHtcclxuICAgIGNvbnN0IGhlYWRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgdGV4dEFyZWFEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcclxuICAgIGNvbnN0IGtleWJvYXJkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBmb290ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICBoZWFkZXJEaXYuY2xhc3NMaXN0LmFkZCgnaGVhZGVyLWRpdicpO1xyXG4gICAgdGV4dEFyZWFEaXYuY2xhc3NMaXN0LmFkZCgndGV4dC1hcmVhLWRpdicpO1xyXG4gICAgdGV4dEFyZWEuY2xhc3NMaXN0LmFkZCgndGV4dC1hcmVhJyk7XHJcbiAgICBrZXlib2FyZERpdi5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZC1kaXYnKTtcclxuICAgIGZvb3RlckRpdi5jbGFzc0xpc3QuYWRkKCdmb290ZXItZGl2Jyk7XHJcblxyXG4gICAgLy90ZXh0QXJlYS5zZXRBdHRyaWJ1dGUoJ21heGxlbmd0aCcsICcxMCcpO1xyXG4gICAgLy90ZXh0QXJlYS5zZXRBdHRyaWJ1dGUoJ2F1dG9mb2N1cycsICcnKTtcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChoZWFkZXJEaXYpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQodGV4dEFyZWFEaXYpO1xyXG4gICAgdGV4dEFyZWFEaXYuYXBwZW5kKHRleHRBcmVhKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGtleWJvYXJkRGl2KTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGZvb3RlckRpdik7XHJcbiAgfTtcclxufTsiLCJleHBvcnQgeyBhZGRLZXlib2FyZExpc3RlbmVyLCBmb2N1c1RleHRBcmVhIH07XHJcbmltcG9ydCB7IGJ1dHRvbnNBcnIgfSBmcm9tICcuLi9pbmRleCc7XHJcblxyXG5mdW5jdGlvbiBhZGRLZXlib2FyZExpc3RlbmVyKCkge1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoKSA9PiB7XHJcbiAgICBpZiAoZXZlbnQuaXNUcnVzdGVkKSB7XHJcbiAgICAgIGxldCB0aGlzQnV0dG9uID0gJyc7XHJcbiAgICAgIGJ1dHRvbnNBcnIuZm9yRWFjaChidXR0b25PYmogPT4ge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKGJ1dHRvbk9iai5rZXljb2RlID09PSBldmVudC5jb2RlKSB7XHJcbiAgICAgICAgICB0aGlzQnV0dG9uID0gYnV0dG9uT2JqO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh0aGlzQnV0dG9uKSB7XHJcbiAgICAgICAgdGhpc0J1dHRvbi5idXR0b24uY2xhc3NMaXN0LmFkZCgna2V5X2FjdGl2ZScpO1xyXG4gICAgICAgIHRoaXNCdXR0b24ucHJlc3NLZXkoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgpID0+IHtcclxuICAgIGlmIChldmVudC5pc1RydXN0ZWQpIHtcclxuICAgICAgbGV0IHRoaXNCdXR0b24gPSAnJztcclxuICAgICAgYnV0dG9uc0Fyci5mb3JFYWNoKGJ1dHRvbk9iaiA9PiB7XHJcbiAgICAgICAgaWYgKGJ1dHRvbk9iai5rZXljb2RlID09PSBldmVudC5jb2RlKSB7XHJcbiAgICAgICAgICB0aGlzQnV0dG9uID0gYnV0dG9uT2JqO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh0aGlzQnV0dG9uKSB7XHJcbiAgICAgICAgdGhpc0J1dHRvbi5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSgna2V5X2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvY3VzVGV4dEFyZWEoKSB7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LWFyZWEnKTtcclxuICAgIHRleHRBcmVhLmZvY3VzKCk7XHJcbiAgfSk7XHJcbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJnZXRDdXJzb3JQb3NpdGlvbnMiLCJ0ZXh0QXJlYSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0YXJ0Iiwic2VsZWN0aW9uU3RhcnQiLCJlbmQiLCJzZWxlY3Rpb25FbmQiLCJjb25zb2xlIiwibG9nIiwicGxhY2VDdXJzb3IiLCJjdXJzb3JQb3NpdGlvbnMiLCJrZXlMZXR0ZXJzRW4iLCJLZXkiLCJjb25zdHJ1Y3RvciIsImtleWNvZGUiLCJrZXlMZXR0ZXIiLCJudW1iZXIiLCJ0aGlzIiwiYnV0dG9uIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImlubmVySFRNTCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcmVzc0tleSIsImFwcGVuZCIsImFkZEtleWJvYXJkQWN0aXZlIiwicmVtb3ZlS2V5Ym9hcmRBY3RpdmUiLCJyZW1vdmUiLCJ2YWx1ZSIsInN1YnN0cmluZyIsImZvY3VzIiwiZGVsZXRlUHJldm91c0xldHRlciIsIm5leHRTdHJpbmciLCJidXR0b25PYmoiLCJlbnRlckxldHRlciIsImNyZWF0ZSIsImhlYWRlckRpdiIsInRleHRBcmVhRGl2Iiwia2V5Ym9hcmREaXYiLCJmb290ZXJEaXYiLCJib2R5IiwiYnV0dG9uc0FyciIsImZvckVhY2giLCJldmVudCIsImlzVHJ1c3RlZCIsInRoaXNCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsImNvZGUiXSwic291cmNlUm9vdCI6IiJ9